window.kmlUtils=function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(n,o,function(e){return t[e]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=4)}([function(t,e,r){(function(t){var n;if("undefined"!=typeof XMLSerializer)n=new XMLSerializer;else{var o="object"==typeof t&&!t.browser,i="object"==typeof Titanium;if("object"!=typeof e||!o&&!i)throw new Error("Unable to initialize serializer");n=new(r(6).XMLSerializer)}e.xml2str=function(t){return void 0!==t.xml?t.xml:n.serializeToString(t)},e.parent=function(t){return t.parentElement||t.parentNode||null},e.get=function(t,e){return t.getElementsByTagName(e)},e.get1=function(t,r){const n=e.get(t,r);return n.length?n[0]:null},e.attr=function(t,e){return t.getAttribute(e)},e.setAttr=function(t,e,r){return t.setAttribute(e,r)},e.attrf=function(t,r){return parseFloat(e.attr(t,r))},e.norm=function(t){return t.normalize?t.normalize():t},e.nodeVal=function(t){return t&&e.norm(t),t&&t.textContent||""},e.numarray=function(t){for(var e=0,r=[];e<t.length;e++)r[e]=parseFloat(t[e]);return r},e.okhash=function(t){if(!t||!t.length)return 0;for(var e=0,r=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e)|0;return r},e.kmlColor=function(t){var e,r;return"#"===(t=t||"").substr(0,1)&&(t=t.substr(1)),6!==t.length&&3!==t.length||(e=t),8===t.length&&(r=parseInt(t.substr(0,2),16)/255,e="#"+t.substr(6,2)+t.substr(4,2)+t.substr(2,2)),[e,isNaN(r)?void 0:r]};var a=/\s*/g;e.coord1=function(t){return e.numarray(t.replace(a,"").split(","))};var s=/^\s*|\s*$/g,u=/\s+/;e.coord=function(t){for(var r=t.replace(s,"").split(u),n=[],o=0;o<r.length;o++)n.push(e.coord1(r[o]));return n},e.gxCoord=function(t){return e.numarray(t.split(" "))},e.gxCoords=function(t){var r=e.get,n=e.gxCoord,o=e.nodeVal,i=r(t,"coord","gx"),a=[],s=[];0===i.length&&(i=r(t,"gx:coord"));for(var u=0;u<i.length;u++)a.push(n(o(i[u])));for(var c=r(t,"when"),l=0;l<c.length;l++)s.push(o(c[l]));return{coords:a,times:s}}}).call(this,r(5))},function(t,e){function r(t,e){for(var r in t)e[r]=t[r]}function n(t,e){var n=t.prototype;if(Object.create){var o=Object.create(e.prototype);n.__proto__=o}if(!(n instanceof e)){function i(){}i.prototype=e.prototype,r(n,i=new i),t.prototype=n=i}n.constructor!=t&&("function"!=typeof t&&console.error("unknow Class:"+t),n.constructor=t)}var o="http://www.w3.org/1999/xhtml",i={},a=i.ELEMENT_NODE=1,s=i.ATTRIBUTE_NODE=2,u=i.TEXT_NODE=3,c=i.CDATA_SECTION_NODE=4,l=i.ENTITY_REFERENCE_NODE=5,f=i.ENTITY_NODE=6,p=i.PROCESSING_INSTRUCTION_NODE=7,h=i.COMMENT_NODE=8,d=i.DOCUMENT_NODE=9,m=i.DOCUMENT_TYPE_NODE=10,g=i.DOCUMENT_FRAGMENT_NODE=11,y=i.NOTATION_NODE=12,v={},w={},N=(v.INDEX_SIZE_ERR=(w[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3)),b=(v.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),v.NOT_FOUND_ERR=(w[8]="Not found",8)),T=(v.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));v.INVALID_STATE_ERR=(w[11]="Invalid state",11),v.SYNTAX_ERR=(w[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),v.NAMESPACE_ERR=(w[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(w[15]="Invalid access",15);function x(t,e){if(e instanceof Error)var r=e;else r=this,Error.call(this,w[t]),this.message=w[t],Error.captureStackTrace&&Error.captureStackTrace(this,x);return r.code=t,e&&(this.message=this.message+": "+e),r}function S(){}function E(t,e){this._node=t,this._refresh=e,C(this)}function C(t){var e=t._node._inc||t._node.ownerDocument._inc;if(t._inc!=e){var n=t._refresh(t._node);rt(t,"length",n.length),r(n,t),t._inc=e}}function D(){}function M(t,e){for(var r=t.length;r--;)if(t[r]===e)return r}function P(t,e,r,n){if(n?e[M(e,n)]=r:e[e.length++]=r,t){r.ownerElement=t;var o=t.ownerDocument;o&&(n&&F(o,t,n),function(t,e,r){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(e._nsMap[r.prefix?r.localName:""]=r.value)}(o,t,r))}}function I(t,e,r){var n=M(e,r);if(!(n>=0))throw x(b,new Error(t.tagName+"@"+r));for(var o=e.length-1;n<o;)e[n]=e[++n];if(e.length=o,t){var i=t.ownerDocument;i&&(F(i,t,r),r.ownerElement=null)}}function A(t){if(this._features={},t)for(var e in t)this._features=t[e]}function _(){}function O(t){return("<"==t?"&lt;":">"==t&&"&gt;")||"&"==t&&"&amp;"||'"'==t&&"&quot;"||"&#"+t.charCodeAt()+";"}function R(t,e){if(e(t))return!0;if(t=t.firstChild)do{if(R(t,e))return!0}while(t=t.nextSibling)}function k(){}function F(t,e,r,n){t&&t._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete e._nsMap[r.prefix?r.localName:""]}function L(t,e,r){if(t&&t._inc){t._inc++;var n=e.childNodes;if(r)n[n.length++]=r;else{for(var o=e.firstChild,i=0;o;)n[i++]=o,o=o.nextSibling;n.length=i}}}function U(t,e){var r=e.previousSibling,n=e.nextSibling;return r?r.nextSibling=n:t.firstChild=n,n?n.previousSibling=r:t.lastChild=r,L(t.ownerDocument,t),e}function j(t,e,r){var n=e.parentNode;if(n&&n.removeChild(e),e.nodeType===g){var o=e.firstChild;if(null==o)return e;var i=e.lastChild}else o=i=e;var a=r?r.previousSibling:t.lastChild;o.previousSibling=a,i.nextSibling=r,a?a.nextSibling=o:t.firstChild=o,null==r?t.lastChild=i:r.previousSibling=i;do{o.parentNode=t}while(o!==i&&(o=o.nextSibling));return L(t.ownerDocument||t,t),e.nodeType==g&&(e.firstChild=e.lastChild=null),e}function G(){this._nsMap={}}function V(){}function B(){}function $(){}function z(){}function H(){}function X(){}function q(){}function J(){}function Y(){}function W(){}function K(){}function Q(){}function Z(t,e){var r=[],n=9==this.nodeType?this.documentElement:this,o=n.prefix,i=n.namespaceURI;if(i&&null==o&&null==(o=n.lookupPrefix(i)))var a=[{namespace:i,prefix:null}];return et(this,r,t,e,a),r.join("")}function tt(t,e,r){var n=t.prefix||"",o=t.namespaceURI;if(!n&&!o)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=r.length;i--;){var a=r[i];if(a.prefix==n)return a.namespace!=o}return!0}function et(t,e,r,n,i){if(n){if(!(t=n(t)))return;if("string"==typeof t)return void e.push(t)}switch(t.nodeType){case a:i||(i=[]);i.length;var f=t.attributes,y=f.length,v=t.firstChild,w=t.tagName;r=o===t.namespaceURI||r,e.push("<",w);for(var N=0;N<y;N++){"xmlns"==(b=f.item(N)).prefix?i.push({prefix:b.localName,namespace:b.value}):"xmlns"==b.nodeName&&i.push({prefix:"",namespace:b.value})}for(N=0;N<y;N++){var b;if(tt(b=f.item(N),0,i)){var T=b.prefix||"",x=b.namespaceURI,S=T?" xmlns:"+T:" xmlns";e.push(S,'="',x,'"'),i.push({prefix:T,namespace:x})}et(b,e,r,n,i)}if(tt(t,0,i)){T=t.prefix||"",x=t.namespaceURI,S=T?" xmlns:"+T:" xmlns";e.push(S,'="',x,'"'),i.push({prefix:T,namespace:x})}if(v||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(w)){if(e.push(">"),r&&/^script$/i.test(w))for(;v;)v.data?e.push(v.data):et(v,e,r,n,i),v=v.nextSibling;else for(;v;)et(v,e,r,n,i),v=v.nextSibling;e.push("</",w,">")}else e.push("/>");return;case d:case g:for(v=t.firstChild;v;)et(v,e,r,n,i),v=v.nextSibling;return;case s:return e.push(" ",t.name,'="',t.value.replace(/[<&"]/g,O),'"');case u:return e.push(t.data.replace(/[<&]/g,O));case c:return e.push("<![CDATA[",t.data,"]]>");case h:return e.push("\x3c!--",t.data,"--\x3e");case m:var E=t.publicId,C=t.systemId;if(e.push("<!DOCTYPE ",t.name),E)e.push(' PUBLIC "',E),C&&"."!=C&&e.push('" "',C),e.push('">');else if(C&&"."!=C)e.push(' SYSTEM "',C,'">');else{var D=t.internalSubset;D&&e.push(" [",D,"]"),e.push(">")}return;case p:return e.push("<?",t.target," ",t.data,"?>");case l:return e.push("&",t.nodeName,";");default:e.push("??",t.nodeName)}}function rt(t,e,r){t[e]=r}x.prototype=Error.prototype,r(v,x),S.prototype={length:0,item:function(t){return this[t]||null},toString:function(t,e){for(var r=[],n=0;n<this.length;n++)et(this[n],r,t,e);return r.join("")}},E.prototype.item=function(t){return C(this),this[t]},n(E,S),D.prototype={length:0,item:S.prototype.item,getNamedItem:function(t){for(var e=this.length;e--;){var r=this[e];if(r.nodeName==t)return r}},setNamedItem:function(t){var e=t.ownerElement;if(e&&e!=this._ownerElement)throw new x(T);var r=this.getNamedItem(t.nodeName);return P(this._ownerElement,this,t,r),r},setNamedItemNS:function(t){var e,r=t.ownerElement;if(r&&r!=this._ownerElement)throw new x(T);return e=this.getNamedItemNS(t.namespaceURI,t.localName),P(this._ownerElement,this,t,e),e},removeNamedItem:function(t){var e=this.getNamedItem(t);return I(this._ownerElement,this,e),e},removeNamedItemNS:function(t,e){var r=this.getNamedItemNS(t,e);return I(this._ownerElement,this,r),r},getNamedItemNS:function(t,e){for(var r=this.length;r--;){var n=this[r];if(n.localName==e&&n.namespaceURI==t)return n}return null}},A.prototype={hasFeature:function(t,e){var r=this._features[t.toLowerCase()];return!(!r||e&&!(e in r))},createDocument:function(t,e,r){var n=new k;if(n.implementation=this,n.childNodes=new S,n.doctype=r,r&&n.appendChild(r),e){var o=n.createElementNS(t,e);n.appendChild(o)}return n},createDocumentType:function(t,e,r){var n=new X;return n.name=t,n.nodeName=t,n.publicId=e,n.systemId=r,n}},_.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(t,e){return j(this,t,e)},replaceChild:function(t,e){this.insertBefore(t,e),e&&this.removeChild(e)},removeChild:function(t){return U(this,t)},appendChild:function(t){return this.insertBefore(t,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(t){return function t(e,r,n){var o=new r.constructor;for(var i in r){var u=r[i];"object"!=typeof u&&u!=o[i]&&(o[i]=u)}r.childNodes&&(o.childNodes=new S);o.ownerDocument=e;switch(o.nodeType){case a:var c=r.attributes,l=o.attributes=new D,f=c.length;l._ownerElement=o;for(var p=0;p<f;p++)o.setAttributeNode(t(e,c.item(p),!0));break;case s:n=!0}if(n)for(var h=r.firstChild;h;)o.appendChild(t(e,h,n)),h=h.nextSibling;return o}(this.ownerDocument||this,this,t)},normalize:function(){for(var t=this.firstChild;t;){var e=t.nextSibling;e&&e.nodeType==u&&t.nodeType==u?(this.removeChild(e),t.appendData(e.data)):(t.normalize(),t=e)}},isSupported:function(t,e){return this.ownerDocument.implementation.hasFeature(t,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(t){for(var e=this;e;){var r=e._nsMap;if(r)for(var n in r)if(r[n]==t)return n;e=e.nodeType==s?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(t){for(var e=this;e;){var r=e._nsMap;if(r&&t in r)return r[t];e=e.nodeType==s?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(t){return null==this.lookupPrefix(t)}},r(i,_),r(i,_.prototype),k.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,insertBefore:function(t,e){if(t.nodeType==g){for(var r=t.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,e),r=n}return t}return null==this.documentElement&&t.nodeType==a&&(this.documentElement=t),j(this,t,e),t.ownerDocument=this,t},removeChild:function(t){return this.documentElement==t&&(this.documentElement=null),U(this,t)},importNode:function(t,e){return function t(e,r,n){var o;switch(r.nodeType){case a:(o=r.cloneNode(!1)).ownerDocument=e;case g:break;case s:n=!0}o||(o=r.cloneNode(!1));o.ownerDocument=e;o.parentNode=null;if(n)for(var i=r.firstChild;i;)o.appendChild(t(e,i,n)),i=i.nextSibling;return o}(this,t,e)},getElementById:function(t){var e=null;return R(this.documentElement,function(r){if(r.nodeType==a&&r.getAttribute("id")==t)return e=r,!0}),e},createElement:function(t){var e=new G;return e.ownerDocument=this,e.nodeName=t,e.tagName=t,e.childNodes=new S,(e.attributes=new D)._ownerElement=e,e},createDocumentFragment:function(){var t=new W;return t.ownerDocument=this,t.childNodes=new S,t},createTextNode:function(t){var e=new $;return e.ownerDocument=this,e.appendData(t),e},createComment:function(t){var e=new z;return e.ownerDocument=this,e.appendData(t),e},createCDATASection:function(t){var e=new H;return e.ownerDocument=this,e.appendData(t),e},createProcessingInstruction:function(t,e){var r=new K;return r.ownerDocument=this,r.tagName=r.target=t,r.nodeValue=r.data=e,r},createAttribute:function(t){var e=new V;return e.ownerDocument=this,e.name=t,e.nodeName=t,e.localName=t,e.specified=!0,e},createEntityReference:function(t){var e=new Y;return e.ownerDocument=this,e.nodeName=t,e},createElementNS:function(t,e){var r=new G,n=e.split(":"),o=r.attributes=new D;return r.childNodes=new S,r.ownerDocument=this,r.nodeName=e,r.tagName=e,r.namespaceURI=t,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=e,o._ownerElement=r,r},createAttributeNS:function(t,e){var r=new V,n=e.split(":");return r.ownerDocument=this,r.nodeName=e,r.name=e,r.namespaceURI=t,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=e,r}},n(k,_),G.prototype={nodeType:a,hasAttribute:function(t){return null!=this.getAttributeNode(t)},getAttribute:function(t){var e=this.getAttributeNode(t);return e&&e.value||""},getAttributeNode:function(t){return this.attributes.getNamedItem(t)},setAttribute:function(t,e){var r=this.ownerDocument.createAttribute(t);r.value=r.nodeValue=""+e,this.setAttributeNode(r)},removeAttribute:function(t){var e=this.getAttributeNode(t);e&&this.removeAttributeNode(e)},appendChild:function(t){return t.nodeType===g?this.insertBefore(t,null):function(t,e){var r=e.parentNode;if(r){var n=t.lastChild;r.removeChild(e),n=t.lastChild}return n=t.lastChild,e.parentNode=t,e.previousSibling=n,e.nextSibling=null,n?n.nextSibling=e:t.firstChild=e,t.lastChild=e,L(t.ownerDocument,t,e),e}(this,t)},setAttributeNode:function(t){return this.attributes.setNamedItem(t)},setAttributeNodeNS:function(t){return this.attributes.setNamedItemNS(t)},removeAttributeNode:function(t){return this.attributes.removeNamedItem(t.nodeName)},removeAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);r&&this.removeAttributeNode(r)},hasAttributeNS:function(t,e){return null!=this.getAttributeNodeNS(t,e)},getAttributeNS:function(t,e){var r=this.getAttributeNodeNS(t,e);return r&&r.value||""},setAttributeNS:function(t,e,r){var n=this.ownerDocument.createAttributeNS(t,e);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(t,e){return this.attributes.getNamedItemNS(t,e)},getElementsByTagName:function(t){return new E(this,function(e){var r=[];return R(e,function(n){n===e||n.nodeType!=a||"*"!==t&&n.tagName!=t||r.push(n)}),r})},getElementsByTagNameNS:function(t,e){return new E(this,function(r){var n=[];return R(r,function(o){o===r||o.nodeType!==a||"*"!==t&&o.namespaceURI!==t||"*"!==e&&o.localName!=e||n.push(o)}),n})}},k.prototype.getElementsByTagName=G.prototype.getElementsByTagName,k.prototype.getElementsByTagNameNS=G.prototype.getElementsByTagNameNS,n(G,_),V.prototype.nodeType=s,n(V,_),B.prototype={data:"",substringData:function(t,e){return this.data.substring(t,t+e)},appendData:function(t){t=this.data+t,this.nodeValue=this.data=t,this.length=t.length},insertData:function(t,e){this.replaceData(t,0,e)},appendChild:function(t){throw new Error(w[N])},deleteData:function(t,e){this.replaceData(t,e,"")},replaceData:function(t,e,r){r=this.data.substring(0,t)+r+this.data.substring(t+e),this.nodeValue=this.data=r,this.length=r.length}},n(B,_),$.prototype={nodeName:"#text",nodeType:u,splitText:function(t){var e=this.data,r=e.substring(t);e=e.substring(0,t),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},n($,B),z.prototype={nodeName:"#comment",nodeType:h},n(z,B),H.prototype={nodeName:"#cdata-section",nodeType:c},n(H,B),X.prototype.nodeType=m,n(X,_),q.prototype.nodeType=y,n(q,_),J.prototype.nodeType=f,n(J,_),Y.prototype.nodeType=l,n(Y,_),W.prototype.nodeName="#document-fragment",W.prototype.nodeType=g,n(W,_),K.prototype.nodeType=p,n(K,_),Q.prototype.serializeToString=function(t,e,r){return Z.call(t,e,r)},_.prototype.toString=Z;try{if(Object.defineProperty){Object.defineProperty(E.prototype,"length",{get:function(){return C(this),this.$$length}}),Object.defineProperty(_.prototype,"textContent",{get:function(){return function t(e){switch(e.nodeType){case a:case g:var r=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&r.push(t(e)),e=e.nextSibling;return r.join("");default:return e.nodeValue}}(this)},set:function(t){switch(this.nodeType){case a:case g:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),rt=function(t,e,r){t["$$"+e]=r}}}catch(t){}e.DOMImplementation=A,e.XMLSerializer=Q},function(t,e){e.FOLDER_KEY_NAME="_fkey"},function(t,e){function r(t,e){return"#"===t[0]&&(t=t.substr(1)),3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),t.length,[parseInt(t.substr(1,2),16),parseInt(t.substr(3,2),16),parseInt(t.substr(5,2),16),void 0===e?255:Math.round(255*e)]}function n(t){return{type:"esriSLS",style:"esriSLSSolid",color:t.stroke?r(t.stroke,t["stroke-opacity"]):null,width:t["stroke-width"]}}e.symbol=function(t){var e=t.geometry.type;return"LineString"===e?n(t.properties):"Polygon"===e?function(t){return{type:"esriSFS",style:"esriSFSSolid",color:t.fill?r(t.fill,t["fill-opacity"]):null,outline:n(t)}}(t.properties):"Point"===e?(t.properties,{}):void 0}},function(t,e,r){var n=r(0).get,o=r(8).parse,i=r(9).parse,a=r(11).parse,s=r(12);function u(t,e){for(var r=[],a=n(t,"Placemark"),s=e&&e.style?o(t,{returnPropertiesSetter:!0}):null,u=0;u<a.length;u++)r.push(i(a[u],s));return{type:"FeatureCollection",features:r}}e.parse=function(t,e){var r=a(t);return{geoJSON:u(t,e),folders:r}},e.parseFolder=a,e.parseGeoJSON=u,e.arcgisConvertor=s},function(t,e){var r,n,o=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(r===setTimeout)return setTimeout(t,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(t){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var t=s(p);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||l||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(t,e,r){function n(t){this.options=t||{locator:{}}}function o(){this.cdata=!1}function i(t,e){e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber}function a(t){if(t)return"\n@"+(t.systemId||"")+"#[line:"+t.lineNumber+",col:"+t.columnNumber+"]"}function s(t,e,r){return"string"==typeof t?t.substr(e,r):t.length>=e+r||e?new java.lang.String(t,e,r)+"":t}function u(t,e){t.currentElement?t.currentElement.appendChild(e):t.doc.appendChild(e)}n.prototype.parseFromString=function(t,e){var r=this.options,n=new c,i=r.domBuilder||new o,s=r.errorHandler,u=r.locator,l=r.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&i.setDocumentLocator(u),n.errorHandler=function(t,e,r){if(!t){if(e instanceof o)return e;t=e}var n={},i=t instanceof Function;function s(e){var o=t[e];!o&&i&&(o=2==t.length?function(r){t(e,r)}:t),n[e]=o&&function(t){o("[xmldom "+e+"]\t"+t+a(r))}||function(){}}return r=r||{},s("warning"),s("error"),s("fatalError"),n}(s,i,u),n.domBuilder=r.domBuilder||i,/\/x?html?$/.test(e)&&(f.nbsp=" ",f.copy="©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",t?n.parse(t,l,f):n.errorHandler.error("invalid doc source"),i.doc},o.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(t,e,r,n){var o=this.doc,a=o.createElementNS(t,r||e),s=n.length;u(this,a),this.currentElement=a,this.locator&&i(this.locator,a);for(var c=0;c<s;c++){t=n.getURI(c);var l=n.getValue(c),f=(r=n.getQName(c),o.createAttributeNS(t,r));this.locator&&i(n.getLocator(c),f),f.value=f.nodeValue=l,a.setAttributeNode(f)}},endElement:function(t,e,r){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(t,e){},endPrefixMapping:function(t){},processingInstruction:function(t,e){var r=this.doc.createProcessingInstruction(t,e);this.locator&&i(this.locator,r),u(this,r)},ignorableWhitespace:function(t,e,r){},characters:function(t,e,r){if(t=s.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(t);else n=this.doc.createTextNode(t);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(t)&&this.doc.appendChild(n),this.locator&&i(this.locator,n)}},skippedEntity:function(t){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(t){(this.locator=t)&&(t.lineNumber=0)},comment:function(t,e,r){t=s.apply(this,arguments);var n=this.doc.createComment(t);this.locator&&i(this.locator,n),u(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(t,e,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var o=n.createDocumentType(t,e,r);this.locator&&i(this.locator,o),u(this,o)}},warning:function(t){console.warn("[xmldom warning]\t"+t,a(this.locator))},error:function(t){console.error("[xmldom error]\t"+t,a(this.locator))},fatalError:function(t){throw console.error("[xmldom fatalError]\t"+t,a(this.locator)),t}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(t){o.prototype[t]=function(){return null}});var c=r(7).XMLReader,l=e.DOMImplementation=r(1).DOMImplementation;e.XMLSerializer=r(1).XMLSerializer,e.DOMParser=n},function(t,e){var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+r.source+n.source+"*(?::"+r.source+n.source+"*)?$"),i=0,a=1,s=2,u=3,c=4,l=5,f=6,p=7;function h(){}function d(t,e){return e.lineNumber=t.lineNumber,e.columnNumber=t.columnNumber,e}function m(t,e,r,n,o,h){for(var d,m=++e,g=i;;){var y=t.charAt(m);switch(y){case"=":if(g===a)d=t.slice(e,m),g=u;else{if(g!==s)throw new Error("attribute equal must after attrName");g=u}break;case"'":case'"':if(g===u||g===a){if(g===a&&(h.warning('attribute value must after "="'),d=t.slice(e,m)),e=m+1,!((m=t.indexOf(y,e))>0))throw new Error("attribute value no end '"+y+"' match");v=t.slice(e,m).replace(/&#?\w+;/g,o),r.add(d,v,e-1),g=l}else{if(g!=c)throw new Error('attribute value must after "="');v=t.slice(e,m).replace(/&#?\w+;/g,o),r.add(d,v,e),h.warning('attribute "'+d+'" missed start quot('+y+")!!"),e=m+1,g=l}break;case"/":switch(g){case i:r.setTagName(t.slice(e,m));case l:case f:case p:g=p,r.closed=!0;case c:case a:case s:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),g==i&&r.setTagName(t.slice(e,m)),m;case">":switch(g){case i:r.setTagName(t.slice(e,m));case l:case f:case p:break;case c:case a:"/"===(v=t.slice(e,m)).slice(-1)&&(r.closed=!0,v=v.slice(0,-1));case s:g===s&&(v=d),g==c?(h.warning('attribute "'+v+'" missed quot(")!!'),r.add(d,v.replace(/&#?\w+;/g,o),e)):("http://www.w3.org/1999/xhtml"===n[""]&&v.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+v+'" missed value!! "'+v+'" instead!!'),r.add(v,v,e));break;case u:throw new Error("attribute value missed!!")}return m;case"":y=" ";default:if(y<=" ")switch(g){case i:r.setTagName(t.slice(e,m)),g=f;break;case a:d=t.slice(e,m),g=s;break;case c:var v=t.slice(e,m).replace(/&#?\w+;/g,o);h.warning('attribute "'+v+'" missed quot(")!!'),r.add(d,v,e);case l:g=f}else switch(g){case s:r.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&d.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),r.add(d,d,e),e=m,g=a;break;case l:h.warning('attribute space is required"'+d+'"!!');case f:g=a,e=m;break;case u:g=c,e=m;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}m++}}function g(t,e,r){for(var n=t.tagName,o=null,i=t.length;i--;){var a=t[i],s=a.qName,u=a.value;if((p=s.indexOf(":"))>0)var c=a.prefix=s.slice(0,p),l=s.slice(p+1),f="xmlns"===c&&l;else l=s,c=null,f="xmlns"===s&&"";a.localName=l,!1!==f&&(null==o&&(o={},w(r,r={})),r[f]=o[f]=u,a.uri="http://www.w3.org/2000/xmlns/",e.startPrefixMapping(f,u))}for(i=t.length;i--;){(c=(a=t[i]).prefix)&&("xml"===c&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(a.uri=r[c||""]))}var p;(p=n.indexOf(":"))>0?(c=t.prefix=n.slice(0,p),l=t.localName=n.slice(p+1)):(c=null,l=t.localName=n);var h=t.uri=r[c||""];if(e.startElement(h,l,n,t),!t.closed)return t.currentNSMap=r,t.localNSMap=o,!0;if(e.endElement(h,l,n),o)for(c in o)e.endPrefixMapping(c)}function y(t,e,r,n,o){if(/^(?:script|textarea)$/i.test(r)){var i=t.indexOf("</"+r+">",e),a=t.substring(e+1,i);if(/[&<]/.test(a))return/^script$/i.test(r)?(o.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,n),o.characters(a,0,a.length),i)}return e+1}function v(t,e,r,n){var o=n[r];return null==o&&((o=t.lastIndexOf("</"+r+">"))<e&&(o=t.lastIndexOf("</"+r)),n[r]=o),o<e}function w(t,e){for(var r in t)e[r]=t[r]}function N(t,e,r,n){switch(t.charAt(e+2)){case"-":return"-"===t.charAt(e+3)?(o=t.indexOf("--\x3e",e+4))>e?(r.comment(t,e+4,o-e-4),o+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==t.substr(e+3,6)){var o=t.indexOf("]]>",e+9);return r.startCDATA(),r.characters(t,e+9,o-e-9),r.endCDATA(),o+3}var i=function(t,e){var r,n=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;o.lastIndex=e,o.exec(t);for(;r=o.exec(t);)if(n.push(r),r[1])return n}(t,e),a=i.length;if(a>1&&/!doctype/i.test(i[0][0])){var s=i[1][0],u=a>3&&/^public$/i.test(i[2][0])&&i[3][0],c=a>4&&i[4][0],l=i[a-1];return r.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),l.index+l[0].length}}return-1}function b(t,e,r){var n=t.indexOf("?>",e);if(n){var o=t.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return r.processingInstruction(o[1],o[2]),n+2}return-1}return-1}function T(t){}function x(t,e){return t.__proto__=e,t}h.prototype={parse:function(t,e,r){var n=this.domBuilder;n.startDocument(),w(e,e={}),function(t,e,r,n,o){function i(t){var e=t.slice(1,-1);return e in r?r[e]:"#"===e.charAt(0)?function(t){if(t>65535){var e=55296+((t-=65536)>>10),r=56320+(1023&t);return String.fromCharCode(e,r)}return String.fromCharCode(t)}(parseInt(e.substr(1).replace("x","0x"))):(o.error("entity not found:"+t),t)}function a(e){if(e>w){var r=t.substring(w,e).replace(/&#?\w+;/g,i);f&&s(w),n.characters(r,0,e-w),w=e}}function s(e,r){for(;e>=c&&(r=l.exec(t));)u=r.index,c=u+r[0].length,f.lineNumber++;f.columnNumber=e-u+1}var u=0,c=0,l=/.*(?:\r\n?|\n)|.*$/g,f=n.locator,p=[{currentNSMap:e}],h={},w=0;for(;;){try{var x=t.indexOf("<",w);if(x<0){if(!t.substr(w).match(/^\s*$/)){var S=n.doc,E=S.createTextNode(t.substr(w));S.appendChild(E),n.currentElement=E}return}switch(x>w&&a(x),t.charAt(x+1)){case"/":var C=t.indexOf(">",x+3),D=t.substring(x+2,C),M=p.pop();C<0?(D=t.substring(x+2).replace(/[\s<].*/,""),o.error("end tag name: "+D+" is not complete:"+M.tagName),C=x+1+D.length):D.match(/\s</)&&(D=D.replace(/[\s<].*/,""),o.error("end tag name: "+D+" maybe not complete"),C=x+1+D.length);var P=M.localNSMap,I=M.tagName==D,A=I||M.tagName&&M.tagName.toLowerCase()==D.toLowerCase();if(A){if(n.endElement(M.uri,M.localName,D),P)for(var _ in P)n.endPrefixMapping(_);I||o.fatalError("end tag name: "+D+" is not match the current start tagName:"+M.tagName)}else p.push(M);C++;break;case"?":f&&s(x),C=b(t,x,n);break;case"!":f&&s(x),C=N(t,x,n,o);break;default:f&&s(x);var O=new T,R=p[p.length-1].currentNSMap,C=m(t,x,O,R,i,o),k=O.length;if(!O.closed&&v(t,C,O.tagName,h)&&(O.closed=!0,r.nbsp||o.warning("unclosed xml attribute")),f&&k){for(var F=d(f,{}),L=0;L<k;L++){var U=O[L];s(U.offset),U.locator=d(f,{})}n.locator=F,g(O,n,R)&&p.push(O),n.locator=f}else g(O,n,R)&&p.push(O);"http://www.w3.org/1999/xhtml"!==O.uri||O.closed?C++:C=y(t,C,O.tagName,i,n)}}catch(t){o.error("element parse error: "+t),C=-1}C>w?w=C:a(Math.max(x,w)+1)}}(t,e,r,n,this.errorHandler),n.endDocument()}},T.prototype={setTagName:function(t){if(!o.test(t))throw new Error("invalid tagName:"+t);this.tagName=t},add:function(t,e,r){if(!o.test(t))throw new Error("invalid attribute:"+t);this[this.length++]={qName:t,value:e,offset:r}},length:0,getLocalName:function(t){return this[t].localName},getLocator:function(t){return this[t].locator},getQName:function(t){return this[t].qName},getURI:function(t){return this[t].uri},getValue:function(t){return this[t].value}},x({},x.prototype)instanceof x||(x=function(t,e){function r(){}for(e in r.prototype=e,r=new r,t)r[e]=t[e];return r}),e.XMLReader=h},function(t,e,r){var n=r(0),o=n.get,i=n.get1,a=n.attr,s=n.nodeVal,u=n.okhash,c=n.xml2str,l=n.kmlColor;e.parse=function(t,e){for(var r={},n={},f={},p=o(t,"Style"),h=o(t,"StyleMap"),d=0;d<p.length;d++){var m=u(c(p[d])).toString(16);r["#"+a(p[d],"id")]=m,n[m]=p[d]}for(var g=0;g<h.length;g++){r["#"+a(h[g],"id")]=u(c(h[g])).toString(16);for(var y=o(h[g],"Pair"),v={},w=0;w<y.length;w++)v[s(i(y[w],"key"))]=s(i(y[w],"styleUrl"));f["#"+a(h[g],"id")]=v}return e&&e.returnPropertiesSetter?function(t,e){!function(t,e,r,n,o){var a=s(i(t,"styleUrl")),u=i(t,"LineStyle"),c=i(t,"PolyStyle"),f=null;if(a){"#"!==a[0]&&(a="#"+a),e.styleUrl=a,n[a]&&(e.styleHash=n[a]),o[a]&&(e.styleMapHash=o[a],e.styleHash=n[o[a].normal]);var p=r[e.styleHash];p&&(f=i(p,"IconStyle"),u=u||i(p,"LineStyle"),c=c||i(p,"PolyStyle"))}f&&function(t,e){var r=i(e,"Icon");if(r){var n=s(i(r,"href"));n&&(t.icon=n)}}(e,f);u&&function(t,e){var r=l(s(i(e,"color"))),n=r[0],o=r[1],a=parseFloat(s(i(e,"width")));n&&(t.stroke=n);isNaN(o)||(t["stroke-opacity"]=o);isNaN(a)||(t["stroke-width"]=a)}(e,u);c&&function(t,e){var r=l(s(i(e,"color"))),n=r[0],o=r[1],a=s(i(e,"fill")),u=s(i(e,"outline"));n&&(t.fill=n);isNaN(o)||(t["fill-opacity"]=o);a&&(t["fill-opacity"]="1"===a?t["fill-opacity"]||1:0);u&&(t["stroke-opacity"]="1"===u?t["stroke-opacity"]||1:0)}(e,c)}(t,e,n,r,f)}:{styleByHash:n,styleIndex:r,styleMapIndex:f}}},function(t,e,r){var n=r(2).FOLDER_KEY_NAME,o=r(10).parse,i=r(0),a=i.get,s=i.parent,u=i.get1,c=i.nodeVal,l=i.attr;e.parse=function(t,e){var r,i={},f=o(t),p="Folder"===s(t).tagName?l(s(t),n):null,h=c(u(t,"name")),d=c(u(t,"address")),m=c(u(t,"description")),g=u(t,"TimeSpan"),y=u(t,"TimeStamp"),v=u(t,"ExtendedData"),w=u(t,"visibility");if(!f.geoms.length)return[];if(p&&(i.folder=p),h&&(i.name=h),d&&(i.address=d),m&&(i.description=m),w&&(i.visibility=c(w)),y&&(i.timestamp=c(u(y,"when"))),g){var N=c(u(g,"begin")),b=c(u(g,"end"));i.timespan={begin:N,end:b}}if(f.coordTimes.length&&(i.coordTimes=1===f.coordTimes.length?f.coordTimes[0]:f.coordTimes),v){var T=a(v,"Data"),x=a(v,"SimpleData");for(r=0;r<T.length;r++)i[T[r].getAttribute("name")]=c(u(T[r],"value"));for(r=0;r<x.length;r++)i[x[r].getAttribute("name")]=c(x[r])}e&&e(t,i);var S={type:"Feature",geometry:1===f.geoms.length?f.geoms[0]:{type:"GeometryCollection",geometries:f.geoms},properties:i};return l(t,"id")&&(S.id=l(t,"id")),S}},function(t,e,r){var n=r(0),o=n.get,i=n.get1,a=n.nodeVal,s=n.coord1,u=n.coord,c=n.gxCoords,l=["Polygon","LineString","Point","Track","gx:Track"];e.parse=function t(e){var r,n,f,p,h,d=[],m=[];if(i(e,"MultiGeometry"))return t(i(e,"MultiGeometry"));if(i(e,"MultiTrack"))return t(i(e,"MultiTrack"));if(i(e,"gx:MultiTrack"))return t(i(e,"gx:MultiTrack"));for(f=0;f<l.length;f++)if(n=o(e,l[f]))for(p=0;p<n.length;p++)if(r=n[p],"Point"===l[f])d.push({type:"Point",coordinates:s(a(i(r,"coordinates")))});else if("LineString"===l[f])d.push({type:"LineString",coordinates:u(a(i(r,"coordinates")))});else if("Polygon"===l[f]){var g=o(r,"LinearRing"),y=[];for(h=0;h<g.length;h++)y.push(u(a(i(g[h],"coordinates"))));d.push({type:"Polygon",coordinates:y})}else if("Track"===l[f]||"gx:Track"===l[f]){var v=c(r);d.push({type:"LineString",coordinates:v.coords}),v.times.length&&m.push(v.times)}return{geoms:d,coordTimes:m}}},function(t,e,r){var n=r(2).FOLDER_KEY_NAME,o=r(0),i=o.parent,a=o.nodeVal,s=o.get,u=o.get1,c=o.attr,l=o.setAttr;e.parse=function(t,e){var r=Array.from(s(t,"Folder"));if(0===r.length)return[];var o=e&&e.defaultFolderName?e.defaultFolderName:"unknown",f=i(r[0]),p=0,h=function(t){var e=i(t),s=u(t,"name"),f=p+++"";return l(t,n,f),{key:f,parent:"Folder"===e.tagName?c(e,n):null,name:s?a(s):o,children:r.filter(function(e){return i(e)===t}).map(h)}};return r.filter(function(t){return i(t)===f}).map(h)}},function(t,e,r){const n=r(13).graphicJSON,o=r(3).symbol;t.exports={graphicJSON:n,symbol:o}},function(t,e,r){var n=r(14).convert,o=r(3).symbol;e.graphicJSON=function(t){const e=n(t.geometry);return e.spatialReference={wkid:4326},{attributes:t.properties,geometry:e,symbol:o(t)}}},function(t,e,r){!function(e,n){if("object"==typeof t&&"object"==typeof t.exports&&(t.exports=n(r(15))),"object"==typeof e.navigator){if(!e.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");e.Terraformer.ArcGIS=n(e.Terraformer)}}(this,function(t){var e={};function r(t){var e,r,n,o,i=0,a=0,s=[];n=t.match(/((\+|\-)[^\+\-]+)/g),o=parseInt(n[0],32);for(var u=1;u<n.length;u+=2)i=e=parseInt(n[u],32)+i,a=r=parseInt(n[u+1],32)+a,s.push([e/o,r/o]);return s}function n(t){return function(t,e){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}(t[0],t[t.length-1])||t.push(t[0]),t}function o(t){var e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function i(t){for(var e,r=0,n=0,o=t.length,i=t[n];n<o-1;n++)r+=((e=t[n+1])[0]-i[0])*(e[1]+i[1]),i=e;return r>=0}function a(t){var e=[],r=t.slice(0),o=n(r.shift().slice(0));if(o.length>=4){i(o)||o.reverse(),e.push(o);for(var a=0;a<r.length;a++){var s=n(r[a].slice(0));s.length>=4&&(i(s)&&s.reverse(),e.push(s))}}return e}function s(e,r){var n=t.Tools.arraysIntersectArrays(e,r),o=t.Tools.coordinatesContainPoint(e,r[0]);return!(n||!o)}function u(e,a){var c={};return(a=a||{}).idAttribute=a.idAttribute||void 0,!e.spatialReference||3857!==e.spatialReference.wkid&&102100!==e.spatialReference.wkid||(c.crs=t.MercatorCRS),"number"==typeof e.x&&"number"==typeof e.y&&(c.type="Point",c.coordinates=[e.x,e.y],(e.z||e.m)&&c.coordinates.push(e.z),e.m&&c.coordinates.push(e.m)),e.points&&(c.type="MultiPoint",c.coordinates=e.points.slice(0)),e.paths&&(1===e.paths.length?(c.type="LineString",c.coordinates=e.paths[0].slice(0)):(c.type="MultiLineString",c.coordinates=e.paths.slice(0))),e.rings&&(c=function(e){for(var r,o,a,u=[],c=[],l=0;l<e.length;l++){var f=n(e[l].slice(0));if(!(f.length<4))if(i(f)){var p=[f.slice().reverse()];u.push(p)}else c.push(f.slice().reverse())}for(var h=[];c.length;){a=c.pop();var d=!1;for(r=u.length-1;r>=0;r--)if(s(o=u[r][0],a)){u[r].push(a),d=!0;break}d||h.push(a)}for(;h.length;){a=h.pop();var m=!1;for(r=u.length-1;r>=0;r--)if(o=u[r][0],t.Tools.arraysIntersectArrays(o,a)){u[r].push(a),m=!0;break}m||u.push([a.reverse()])}return 1===u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}(e.rings.slice(0))),"number"==typeof e.xmin&&"number"==typeof e.ymin&&"number"==typeof e.xmax&&"number"==typeof e.ymax&&(c.type="Polygon",c.coordinates=[[[e.xmax,e.ymax],[e.xmin,e.ymax],[e.xmin,e.ymin],[e.xmax,e.ymin],[e.xmax,e.ymax]]]),(e.compressedGeometry||e.geometry||e.attributes)&&(c.type="Feature",e.compressedGeometry&&(e.geometry={paths:[r(e.compressedGeometry)]}),c.geometry=e.geometry?u(e.geometry):null,c.properties=e.attributes?o(e.attributes):null,e.attributes&&(c.id=e.attributes[a.idAttribute]||e.attributes.OBJECTID||e.attributes.FID)),new t.Primitive(c)}function c(t,e){var r,n=(e=e||{}).idAttribute||"OBJECTID";r=e.sr?{wkid:e.sr}:t&&t.crs&&"urn:ogc:def:crs:OGC:1.3:CRS84"!=t.crs.properties.name?null:{wkid:4326};var i,s={};switch(t.type){case"Point":s.x=t.coordinates[0],s.y=t.coordinates[1],t.coordinates[2]&&(s.z=t.coordinates[2]),t.coordinates[3]&&(s.m=t.coordinates[3]),s.spatialReference=r;break;case"MultiPoint":s.points=t.coordinates.slice(0),s.spatialReference=r;break;case"LineString":s.paths=[t.coordinates.slice(0)],s.spatialReference=r;break;case"MultiLineString":s.paths=t.coordinates.slice(0),s.spatialReference=r;break;case"Polygon":s.rings=a(t.coordinates.slice(0)),s.spatialReference=r;break;case"MultiPolygon":s.rings=function(t){for(var e=[],r=0;r<t.length;r++)for(var n=a(t[r]),o=n.length-1;o>=0;o--){var i=n[o].slice(0);e.push(i)}return e}(t.coordinates.slice(0)),s.spatialReference=r;break;case"Feature":t.geometry&&(s.geometry=c(t.geometry,e)),s.attributes=t.properties?o(t.properties):{},t.id&&(s.attributes[n]=t.id);break;case"FeatureCollection":for(s=[],i=0;i<t.features.length;i++)s.push(c(t.features[i],e));break;case"GeometryCollection":for(s=[],i=0;i<t.geometries.length;i++)s.push(c(t.geometries[i],e))}return s}return e.parse=u,e.convert=c,e.toGeoJSON=u,e.fromGeoJSON=c,e.parseCompressedGeometry=function(e){return new t.LineString(r(e))},e})},function(t,e){!function(e,r){"object"==typeof t&&"object"==typeof t.exports&&(t.exports=r()),"object"==typeof window&&(e.Terraformer=r())}(this,function(){var t={},e=6378137,r=57.29577951308232,n=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}};function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function a(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function s(t){if(t.type)switch(t.type){case"Point":return[t.coordinates[0],t.coordinates[1],t.coordinates[0],t.coordinates[1]];case"MultiPoint":case"LineString":return c(t.coordinates);case"MultiLineString":case"Polygon":return u(t.coordinates);case"MultiPolygon":return function(t){for(var e=null,r=null,n=null,o=null,i=0;i<t.length;i++)for(var a=t[i],s=0;s<a.length;s++)for(var u=a[s],c=0;c<u.length;c++){var l=u[c],f=l[0],p=l[1];null===e?e=f:f<e&&(e=f),null===r?r=f:f>r&&(r=f),null===n?n=p:p<n&&(n=p),null===o?o=p:p>o&&(o=p)}return[e,n,r,o]}(t.coordinates);case"Feature":return t.geometry?s(t.geometry):null;case"FeatureCollection":return function(t){for(var e,r=[],n=t.features.length-1;n>=0;n--)e=s(t.features[n].geometry),r.push([e[0],e[1]]),r.push([e[2],e[3]]);return c(r)}(t);case"GeometryCollection":return function(t){for(var e,r=[],n=t.geometries.length-1;n>=0;n--)e=s(t.geometries[n]),r.push([e[0],e[1]]),r.push([e[2],e[3]]);return c(r)}(t);default:throw new Error("Unknown type: "+t.type)}return null}function u(t){for(var e=null,r=null,n=null,o=null,i=0;i<t.length;i++)for(var a=t[i],s=0;s<a.length;s++){var u=a[s],c=u[0],l=u[1];null===e?e=c:c<e&&(e=c),null===r?r=c:c>r&&(r=c),null===n?n=l:l<n&&(n=l),null===o?o=l:l>o&&(o=l)}return[e,n,r,o]}function c(t){for(var e=null,r=null,n=null,o=null,i=0;i<t.length;i++){var a=t[i],s=a[0],u=a[1];null===e?e=s:s<e&&(e=s),null===r?r=s:s>r&&(r=s),null===n?n=u:u<n&&(n=u),null===o?o=u:u>o&&(o=u)}return[e,n,r,o]}function l(t){var e=s(t);return{x:e[0],y:e[1],w:Math.abs(e[0]-e[2]),h:Math.abs(e[1]-e[3])}}function f(t){return t*r}function p(t){return t*n}function h(t){var r=t[0],n=t[1];return[f(r/e)-360*Math.floor((f(r/e)+180)/360),f(Math.PI/2-2*Math.atan(Math.exp(-1*n/e)))]}function d(t){var r=t[0],n=Math.max(Math.min(t[1],89.99999),-89.99999);return[p(r)*e,e/2*Math.log((1+Math.sin(p(n)))/(1-Math.sin(p(n))))]}function m(t,e,r){if("Point"===t.type)t.coordinates=e(t.coordinates);else if("Feature"===t.type)t.geometry=m(t.geometry,e,!0);else if("FeatureCollection"===t.type)for(var n=0;n<t.features.length;n++)t.features[n]=m(t.features[n],e,!0);else if("GeometryCollection"===t.type)for(var i=0;i<t.geometries.length;i++)t.geometries[i]=m(t.geometries[i],e,!0);else t.coordinates=function t(e,r){for(var n=0;n<e.length;n++)"number"==typeof e[n][0]&&(e[n]=r(e[n])),"object"==typeof e[n]&&(e[n]=t(e[n],r));return e}(t.coordinates,e);return r||e===d&&(t.crs=o),e===h&&delete t.crs,t}function g(t){return m(t,d)}function y(t){return m(t,h)}function v(t,e){return t[0]>e[0]?-1:t[0]<e[0]?1:t[1]>e[1]?-1:t[1]<e[1]?1:0}function w(t,e,r){return function(t,e){return t<e?-1:t>e?1:0}((e[0]-t[0])*(r[1]-t[1])-(r[0]-t[0])*(e[1]-t[1]),0)}function N(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function b(t,e){var r=e;for(var n in t){var o=w(e,r,t[n]);(-1===o||0===o&&N(e,t[n])>N(e,r))&&(r=t[n])}return r}function T(t){if(0===t.length)return[];if(1===t.length)return t;for(var e=[t.sort(v)[0]],r=0;r<e.length;r++){var n=b(t,e[r]);n!==e[0]&&e.push(n)}return e}function x(t,e){for(var r=!1,n=-1,o=t.length,i=o-1;++n<o;i=n)(t[n][1]<=e[1]&&e[1]<t[i][1]||t[i][1]<=e[1]&&e[1]<t[n][1])&&e[0]<(t[i][0]-t[n][0])*(e[1]-t[n][1])/(t[i][1]-t[n][1])+t[n][0]&&(r=!r);return r}function S(t,e){if(t&&t.length){if(1===t.length)return x(t[0],e);if(x(t[0],e)){for(var r=1;r<t.length;r++)if(x(t[r],e))return!1;return!0}return!1}return!1}function E(t,e,r,n){var o=(n[0]-r[0])*(t[1]-r[1])-(n[1]-r[1])*(t[0]-r[0]),i=(e[0]-t[0])*(t[1]-r[1])-(e[1]-t[1])*(t[0]-r[0]),a=(n[1]-r[1])*(e[0]-t[0])-(n[0]-r[0])*(e[1]-t[1]);if(0!==a){var s=o/a,u=i/a;if(0<=s&&s<=1&&0<=u&&u<=1)return!0}return!1}function C(t){return!isNaN(parseFloat(t))&&isFinite(t)}function D(t,e){if(C(t[0][0])){if(C(e[0][0])){for(var r=0;r<t.length-1;r++)for(var n=0;n<e.length-1;n++)if(E(t[r],t[r+1],e[n],e[n+1]))return!0}else for(var o=0;o<e.length;o++)if(D(t,e[o]))return!0}else for(var i=0;i<t.length;i++)if(D(t[i],e))return!0;return!1}function M(t){for(var e=[],r=0;r<t.length;r++){var n=t[r].slice();!1===P(n[0],n[n.length-1])&&n.push(n[0]),e.push(n)}return e}function P(t,e){for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function I(t,e){if(t.length!==e.length)return!1;for(var r=t.slice().sort(v),n=e.slice().sort(v),o=0;o<r.length;o++){if(r[o].length!==n[o].length)return!1;for(var i=0;i<r.length;i++)if(r[o][i]!==n[o][i])return!1}return!0}var A=["length"];function _(t){if(t)switch(t.type){case"Point":return new O(t);case"MultiPoint":return new R(t);case"LineString":return new k(t);case"MultiLineString":return new F(t);case"Polygon":return new L(t);case"MultiPolygon":return new U(t);case"Feature":return new G(t);case"FeatureCollection":return new V(t);case"GeometryCollection":return new B(t);default:throw new Error("Unknown type: "+t.type)}}function O(t){var e=Array.prototype.slice.call(arguments);if(t&&"Point"===t.type&&t.coordinates)a(this,t);else if(t&&i(t))this.coordinates=t;else{if(!(e.length>=2))throw"Terraformer: invalid input for Terraformer.Point";this.coordinates=e}this.type="Point"}function R(t){if(t&&"MultiPoint"===t.type&&t.coordinates)a(this,t);else{if(!i(t))throw"Terraformer: invalid input for Terraformer.MultiPoint";this.coordinates=t}this.type="MultiPoint"}function k(t){if(t&&"LineString"===t.type&&t.coordinates)a(this,t);else{if(!i(t))throw"Terraformer: invalid input for Terraformer.LineString";this.coordinates=t}this.type="LineString"}function F(t){if(t&&"MultiLineString"===t.type&&t.coordinates)a(this,t);else{if(!i(t))throw"Terraformer: invalid input for Terraformer.MultiLineString";this.coordinates=t}this.type="MultiLineString"}function L(t){if(t&&"Polygon"===t.type&&t.coordinates)a(this,t);else{if(!i(t))throw"Terraformer: invalid input for Terraformer.Polygon";this.coordinates=t}this.type="Polygon"}function U(t){if(t&&"MultiPolygon"===t.type&&t.coordinates)a(this,t);else{if(!i(t))throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.coordinates=t}this.type="MultiPolygon"}function G(t){if(t&&"Feature"===t.type)a(this,t);else{if(!(t&&t.type&&t.coordinates))throw"Terraformer: invalid input for Terraformer.Feature";this.geometry=t}this.type="Feature"}function V(t){if(t&&"FeatureCollection"===t.type&&t.features)a(this,t);else{if(!i(t))throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.features=t}this.type="FeatureCollection"}function B(t){if(t&&"GeometryCollection"===t.type&&t.geometries)a(this,t);else if(i(t))this.geometries=t;else{if(!t.coordinates||!t.type)throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection",this.geometries=[t]}this.type="GeometryCollection"}function $(t,e,r){for(var n=d(t),o=r||64,i={type:"Polygon",coordinates:[[]]},a=1;a<=o;a++){var s=a*(360/o)*Math.PI/180;i.coordinates[0].push([n[0]+e*Math.cos(s),n[1]+e*Math.sin(s)])}return i.coordinates=M(i.coordinates),y(i)}function z(t,e,r){var n=r||64,o=e||250;if(!t||t.length<2||!o||!n)throw new Error("Terraformer: missing parameter for Terraformer.Circle");a(this,new G({type:"Feature",geometry:$(t,o,n),properties:{radius:o,center:t,steps:n}}))}return _.prototype.toMercator=function(){return g(this)},_.prototype.toGeographic=function(){return y(this)},_.prototype.envelope=function(){return l(this)},_.prototype.bbox=function(){return s(this)},_.prototype.convexHull=function(){var t,e,r=[];if("Point"===this.type)return null;if("LineString"===this.type||"MultiPoint"===this.type){if(!(this.coordinates&&this.coordinates.length>=3))return null;r=this.coordinates}else if("Polygon"===this.type||"MultiLineString"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)r=r.concat(this.coordinates[t]);if(r.length<3)return null}else if("MultiPolygon"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(t=0;t<this.coordinates.length;t++)for(e=0;e<this.coordinates[t].length;e++)r=r.concat(this.coordinates[t][e]);if(r.length<3)return null}else if("Feature"===this.type){return new _(this.geometry).convexHull()}return new L({type:"Polygon",coordinates:M([T(r)])})},_.prototype.toJSON=function(){var t={};for(var e in this)this.hasOwnProperty(e)&&-1===A.indexOf(e)&&(t[e]=this[e]);return t.bbox=s(this),t},_.prototype.contains=function(t){return new _(t).within(this)},_.prototype.within=function(t){var e,r;if("Feature"===t.type&&(t=t.geometry),"Point"===t.type&&"Point"===this.type)return P(this.coordinates,t.coordinates);if("MultiLineString"===t.type&&"Point"===this.type)for(e=0;e<t.coordinates.length;e++){var n={type:"LineString",coordinates:t.coordinates[e]};if(this.within(n))return!0}if(("LineString"===t.type||"MultiPoint"===t.type)&&"Point"===this.type)for(e=0;e<t.coordinates.length;e++){if(this.coordinates.length!==t.coordinates[e].length)return!1;if(P(this.coordinates,t.coordinates[e]))return!0}if("Polygon"===t.type){if("Polygon"===this.type){if(t.coordinates.length===this.coordinates.length)for(e=0;e<this.coordinates.length;e++)if(I(this.coordinates[e],t.coordinates[e]))return!0;return!(!this.coordinates.length||!S(t.coordinates,this.coordinates[0][0]))&&!D(M(this.coordinates),M(t.coordinates))}if("Point"===this.type)return S(t.coordinates,this.coordinates);if("LineString"===this.type||"MultiPoint"===this.type){if(!this.coordinates||0===this.coordinates.length)return!1;for(e=0;e<this.coordinates.length;e++)if(!1===S(t.coordinates,this.coordinates[e]))return!1;return!0}if("MultiLineString"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new k(this.coordinates[e]).within(t))return r++,!1}return!0}if("MultiPolygon"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new _({type:"Polygon",coordinates:this.coordinates[e]}).within(t))return!1}return!0}}if("MultiPolygon"===t.type){if("Point"===this.type){if(t.coordinates.length)for(e=0;e<t.coordinates.length;e++)if(S(t.coordinates[e],this.coordinates)&&!1===D([this.coordinates],t.coordinates))return!0;return!1}if("Polygon"===this.type){for(e=0;e<this.coordinates.length;e++)if(t.coordinates[e].length===this.coordinates.length)for(j=0;j<this.coordinates.length;j++)if(I(this.coordinates[j],t.coordinates[e][j]))return!0;if(!1===D(this.coordinates,t.coordinates)&&t.coordinates.length){for(e=0;e<t.coordinates.length;e++)r=!1!==S(t.coordinates[e],this.coordinates[0][0]);return r}}else if("LineString"===this.type||"MultiPoint"===this.type)for(e=0;e<t.coordinates.length;e++){var o={type:"Polygon",coordinates:t.coordinates[e]};return!!this.within(o)}else{if("MultiLineString"===this.type){for(e=0;e<this.coordinates.length;e++){if(!1===new k(this.coordinates[e]).within(t))return!1}return!0}if("MultiPolygon"===this.type){for(e=0;e<t.coordinates.length;e++){var i={type:"Polygon",coordinates:t.coordinates[e]};if(!1===this.within(i))return!1}return!0}}}return!1},_.prototype.intersects=function(t){"Feature"===t.type&&(t=t.geometry);var e=new _(t);return!(!this.within(t)&&!e.within(this))||("Point"!==this.type&&"MultiPoint"!==this.type&&"Point"!==t.type&&"MultiPoint"!==t.type?D(this.coordinates,t.coordinates):"Feature"===this.type?new _(this.geometry).intersects(t):(function(){var t=Array.prototype.slice.apply(arguments);void 0!==typeof console&&console.warn&&console.warn.apply(console,t)}("Type "+this.type+" to "+t.type+" intersection is not supported by intersects"),!1))},O.prototype=new _,O.prototype.constructor=O,R.prototype=new _,R.prototype.constructor=R,R.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates]);return this},R.prototype.addPoint=function(t){return this.coordinates.push(t),this},R.prototype.insertPoint=function(t,e){return this.coordinates.splice(e,0,t),this},R.prototype.removePoint=function(t){return"number"==typeof t?this.coordinates.splice(t,1):this.coordinates.splice(this.coordinates.indexOf(t),1),this},R.prototype.get=function(t){return new O(this.coordinates[t])},k.prototype=new _,k.prototype.constructor=k,k.prototype.addVertex=function(t){return this.coordinates.push(t),this},k.prototype.insertVertex=function(t,e){return this.coordinates.splice(e,0,t),this},k.prototype.removeVertex=function(t){return this.coordinates.splice(t,1),this},F.prototype=new _,F.prototype.constructor=F,F.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},F.prototype.get=function(t){return new k(this.coordinates[t])},L.prototype=new _,L.prototype.constructor=L,L.prototype.addVertex=function(t){return this.insertVertex(t,this.coordinates[0].length-1),this},L.prototype.insertVertex=function(t,e){return this.coordinates[0].splice(e,0,t),this},L.prototype.removeVertex=function(t){return this.coordinates[0].splice(t,1),this},L.prototype.close=function(){this.coordinates=M(this.coordinates)},L.prototype.hasHoles=function(){return this.coordinates.length>1},L.prototype.holes=function(){if(holes=[],this.hasHoles())for(var t=1;t<this.coordinates.length;t++)holes.push(new L([this.coordinates[t]]));return holes},U.prototype=new _,U.prototype.constructor=U,U.prototype.forEach=function(t){for(var e=0;e<this.coordinates.length;e++)t.apply(this,[this.coordinates[e],e,this.coordinates])},U.prototype.get=function(t){return new L(this.coordinates[t])},U.prototype.close=function(){var t=[];return this.forEach(function(e){t.push(M(e))}),this.coordinates=t,this},G.prototype=new _,G.prototype.constructor=G,V.prototype=new _,V.prototype.constructor=V,V.prototype.forEach=function(t){for(var e=0;e<this.features.length;e++)t.apply(this,[this.features[e],e,this.features])},V.prototype.get=function(t){var e;return this.forEach(function(r){r.id===t&&(e=r)}),new G(e)},B.prototype=new _,B.prototype.constructor=B,B.prototype.forEach=function(t){for(var e=0;e<this.geometries.length;e++)t.apply(this,[this.geometries[e],e,this.geometries])},B.prototype.get=function(t){return new _(this.geometries[t])},z.prototype=new _,z.prototype.constructor=z,z.prototype.recalculate=function(){return this.geometry=$(this.properties.center,this.properties.radius,this.properties.steps),this},z.prototype.center=function(t){return t&&(this.properties.center=t,this.recalculate()),this.properties.center},z.prototype.radius=function(t){return t&&(this.properties.radius=t,this.recalculate()),this.properties.radius},z.prototype.steps=function(t){return t&&(this.properties.steps=t,this.recalculate()),this.properties.steps},z.prototype.toJSON=function(){return _.prototype.toJSON.call(this)},t.Primitive=_,t.Point=O,t.MultiPoint=R,t.LineString=k,t.MultiLineString=F,t.Polygon=L,t.MultiPolygon=U,t.Feature=G,t.FeatureCollection=V,t.GeometryCollection=B,t.Circle=z,t.toMercator=g,t.toGeographic=y,t.Tools={},t.Tools.positionToMercator=d,t.Tools.positionToGeographic=h,t.Tools.applyConverter=m,t.Tools.toMercator=g,t.Tools.toGeographic=y,t.Tools.createCircle=$,t.Tools.calculateBounds=s,t.Tools.calculateEnvelope=l,t.Tools.coordinatesContainPoint=x,t.Tools.polygonContainsPoint=S,t.Tools.arraysIntersectArrays=D,t.Tools.coordinatesContainPoint=x,t.Tools.coordinatesEqual=I,t.Tools.convexHull=T,t.Tools.isConvex=function(t){for(var e,r=0;r<t.length-3;r++){var n=t[r],o=t[r+1],i=t[r+2],a=[o[0]-n[0],o[1]-n[1]],s=i[0]*a[1]-i[1]*a[0]+a[0]*n[1]-a[1]*n[0];if(0===r)e=s<0;else if(e&&s>0||!e&&s<0)return!1}return!0},t.MercatorCRS=o,t.GeographicCRS={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}},t})}]);