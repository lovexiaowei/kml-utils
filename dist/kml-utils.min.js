window.kmlUtils=function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=9)}([function(e,t,r){(function(t){var n;if("undefined"!=typeof XMLSerializer)n=new XMLSerializer;else{var o="object"==typeof t&&!t.browser,i="object"==typeof Titanium;if(!o&&!i)throw new Error("Unable to initialize serializer");n=new(r(11).XMLSerializer)}function a(e,t){return e.getElementsByTagName(t)}function s(e,t){return e.getAttribute(t)}function u(e){return e.normalize?e.normalize():e}e.exports={parent:function(e){return e.parentElement||e.parentNode||null},get:a,get1:function(e,t){var r=a(e,t);return r.length?r[0]:null},attr:s,setAttr:function(e,t,r){return e.setAttribute(t,r)},attrf:function(e,t){return parseFloat(s(e,t))},norm:u,nodeVal:function(e,t){e&&u(e);var r=e&&e.textContent||"";return(t=void 0===t||t)?r.replace(/(\r\n|\n|\r)/gm,"").trim():r},xml2str:function(e){return void 0!==e.xml?e.xml:n.serializeToString(e)}}}).call(this,r(10))},function(e,t){t.FOLDER_KEY_NAME="_fkey",t.DEFAULT_KML_STYLES={polySyleColor:"88555555",lineStyleColor:"ff555555",lineWidth:2},t.DEFAULT_SYMBOLS={marker:{type:"esriSMS",style:"esriSMSCircle",color:[255,0,0,64],size:10,angle:0,xoffset:0,yoffset:0,outline:{color:[255,0,0,255],width:1,style:"esriSLSSolid",type:"esriSLS"}},polyline:{type:"esriSLS",style:"esriSLSSolid",color:[255,0,0,255],width:2},polygon:{type:"esriSFS",style:"esriSFSSolid",color:[255,0,0,64],outline:{type:"esriSLS",style:"esriSLSSolid",color:[255,0,0,255],width:2}}}},function(e,t){e.exports={hexToKmlColor:function(e,t){if("string"!=typeof e)return"";if(3===(e=e.replace("#","").toLowerCase()).length)e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2];else if(6!==e.length)return"";var r=e[0]+e[1],n=e[2]+e[3],o=e[4]+e[5],i="ff";return"number"==typeof t&&t>=0&&t<=1&&((i=(255*t).toString(16)).indexOf(".")>-1&&(i=i.substr(0,i.indexOf("."))),i.length<2&&(i="0"+i)),i+o+n+r},kmlColor:function(e){var t,r;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(r=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(6,2)+e.substr(4,2)+e.substr(2,2)),[t,isNaN(r)?void 0:r]},numberToHex:function(e,t){var r;return 1===(t=t||255)&&(e*=255),(r=(e=Math.min(e,255)).toString(16)).indexOf(".")>-1&&(r=r.substr(0,r.indexOf("."))),r.length<2&&(r="0"+r),r}}},function(e,t,r){"use strict";function n(e,t,r){void 0===r&&(r={});var n={type:"Feature"};return(0===r.id||r.id)&&(n.id=r.id),r.bbox&&(n.bbox=r.bbox),n.properties=t||{},n.geometry=e,n}function o(e,t,r){return void 0===r&&(r={}),n({type:"Point",coordinates:e},t,r)}function i(e,t,r){void 0===r&&(r={});for(var o=0,i=e;o<i.length;o++){var a=i[o];if(a.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var s=0;s<a[a.length-1].length;s++)if(a[a.length-1][s]!==a[0][s])throw new Error("First and last Position are not equivalent.")}return n({type:"Polygon",coordinates:e},t,r)}function a(e,t,r){if(void 0===r&&(r={}),e.length<2)throw new Error("coordinates must be an array of two or more positions");return n({type:"LineString",coordinates:e},t,r)}function s(e,t){void 0===t&&(t={});var r={type:"FeatureCollection"};return t.id&&(r.id=t.id),t.bbox&&(r.bbox=t.bbox),r.features=e,r}function u(e,t,r){return void 0===r&&(r={}),n({type:"MultiLineString",coordinates:e},t,r)}function c(e,t,r){return void 0===r&&(r={}),n({type:"MultiPoint",coordinates:e},t,r)}function l(e,t,r){return void 0===r&&(r={}),n({type:"MultiPolygon",coordinates:e},t,r)}function f(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e*n}function p(e,r){void 0===r&&(r="kilometers");var n=t.factors[r];if(!n)throw new Error(r+" units is invalid");return e/n}function h(e){return 180*(e%(2*Math.PI))/Math.PI}function d(e){return!isNaN(e)&&null!==e&&!Array.isArray(e)&&!/^\s*$/.test(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.earthRadius=6371008.8,t.factors={centimeters:100*t.earthRadius,centimetres:100*t.earthRadius,degrees:t.earthRadius/111325,feet:3.28084*t.earthRadius,inches:39.37*t.earthRadius,kilometers:t.earthRadius/1e3,kilometres:t.earthRadius/1e3,meters:t.earthRadius,metres:t.earthRadius,miles:t.earthRadius/1609.344,millimeters:1e3*t.earthRadius,millimetres:1e3*t.earthRadius,nauticalmiles:t.earthRadius/1852,radians:1,yards:t.earthRadius/1.0936},t.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/t.earthRadius,yards:1/1.0936},t.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},t.feature=n,t.geometry=function(e,t,r){switch(void 0===r&&(r={}),e){case"Point":return o(t).geometry;case"LineString":return a(t).geometry;case"Polygon":return i(t).geometry;case"MultiPoint":return c(t).geometry;case"MultiLineString":return u(t).geometry;case"MultiPolygon":return l(t).geometry;default:throw new Error(e+" is invalid")}},t.point=o,t.points=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return o(e,t)}),r)},t.polygon=i,t.polygons=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return i(e,t)}),r)},t.lineString=a,t.lineStrings=function(e,t,r){return void 0===r&&(r={}),s(e.map(function(e){return a(e,t)}),r)},t.featureCollection=s,t.multiLineString=u,t.multiPoint=c,t.multiPolygon=l,t.geometryCollection=function(e,t,r){return void 0===r&&(r={}),n({type:"GeometryCollection",geometries:e},t,r)},t.round=function(e,t){if(void 0===t&&(t=0),t&&!(t>=0))throw new Error("precision must be a positive number");var r=Math.pow(10,t||0);return Math.round(e*r)/r},t.radiansToLength=f,t.lengthToRadians=p,t.lengthToDegrees=function(e,t){return h(p(e,t))},t.bearingToAzimuth=function(e){var t=e%360;return t<0&&(t+=360),t},t.radiansToDegrees=h,t.degreesToRadians=function(e){return e%360*Math.PI/180},t.convertLength=function(e,t,r){if(void 0===t&&(t="kilometers"),void 0===r&&(r="kilometers"),!(e>=0))throw new Error("length must be a positive number");return f(p(e,t),r)},t.convertArea=function(e,r,n){if(void 0===r&&(r="meters"),void 0===n&&(n="kilometers"),!(e>=0))throw new Error("area must be a positive number");var o=t.areaFactors[r];if(!o)throw new Error("invalid original units");var i=t.areaFactors[n];if(!i)throw new Error("invalid final units");return e/o*i},t.isNumber=d,t.isObject=function(e){return!!e&&e.constructor===Object},t.validateBBox=function(e){if(!e)throw new Error("bbox is required");if(!Array.isArray(e))throw new Error("bbox must be an Array");if(4!==e.length&&6!==e.length)throw new Error("bbox must be an Array of 4 or 6 numbers");e.forEach(function(e){if(!d(e))throw new Error("bbox must only contain numbers")})},t.validateId=function(e){if(!e)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof e))throw new Error("id must be a number or a string")},t.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},t.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},t.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},t.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},t.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},t.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},t.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},function(e,t){function r(e,t){for(var r in e)t[r]=e[r]}function n(e,t){var n=e.prototype;if(Object.create){var o=Object.create(t.prototype);n.__proto__=o}if(!(n instanceof t)){function i(){}i.prototype=t.prototype,r(n,i=new i),e.prototype=n=i}n.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),n.constructor=e)}var o="http://www.w3.org/1999/xhtml",i={},a=i.ELEMENT_NODE=1,s=i.ATTRIBUTE_NODE=2,u=i.TEXT_NODE=3,c=i.CDATA_SECTION_NODE=4,l=i.ENTITY_REFERENCE_NODE=5,f=i.ENTITY_NODE=6,p=i.PROCESSING_INSTRUCTION_NODE=7,h=i.COMMENT_NODE=8,d=i.DOCUMENT_NODE=9,m=i.DOCUMENT_TYPE_NODE=10,g=i.DOCUMENT_FRAGMENT_NODE=11,y=i.NOTATION_NODE=12,v={},w={},b=(v.INDEX_SIZE_ERR=(w[1]="Index size error",1),v.DOMSTRING_SIZE_ERR=(w[2]="DOMString size error",2),v.HIERARCHY_REQUEST_ERR=(w[3]="Hierarchy request error",3)),S=(v.WRONG_DOCUMENT_ERR=(w[4]="Wrong document",4),v.INVALID_CHARACTER_ERR=(w[5]="Invalid character",5),v.NO_DATA_ALLOWED_ERR=(w[6]="No data allowed",6),v.NO_MODIFICATION_ALLOWED_ERR=(w[7]="No modification allowed",7),v.NOT_FOUND_ERR=(w[8]="Not found",8)),N=(v.NOT_SUPPORTED_ERR=(w[9]="Not supported",9),v.INUSE_ATTRIBUTE_ERR=(w[10]="Attribute in use",10));v.INVALID_STATE_ERR=(w[11]="Invalid state",11),v.SYNTAX_ERR=(w[12]="Syntax error",12),v.INVALID_MODIFICATION_ERR=(w[13]="Invalid modification",13),v.NAMESPACE_ERR=(w[14]="Invalid namespace",14),v.INVALID_ACCESS_ERR=(w[15]="Invalid access",15);function x(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,w[e]),this.message=w[e],Error.captureStackTrace&&Error.captureStackTrace(this,x);return r.code=e,t&&(this.message=this.message+": "+t),r}function E(){}function T(e,t){this._node=e,this._refresh=t,P(this)}function P(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var n=e._refresh(e._node);re(e,"length",n.length),r(n,e),e._inc=t}}function M(){}function C(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function k(e,t,r,n){if(n?t[C(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var o=e.ownerDocument;o&&(n&&O(o,e,n),function(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}(o,e,r))}}function D(e,t,r){var n=C(t,r);if(!(n>=0))throw x(S,new Error(e.tagName+"@"+r));for(var o=t.length-1;n<o;)t[n]=t[++n];if(t.length=o,e){var i=e.ownerDocument;i&&(O(i,e,r),r.ownerElement=null)}}function L(e){if(this._features={},e)for(var t in e)this._features=e[t]}function A(){}function I(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function R(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(R(e,t))return!0}while(e=e.nextSibling)}function F(){}function O(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function _(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var o=t.firstChild,i=0;o;)n[i++]=o,o=o.nextSibling;n.length=i}}}function j(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,_(e.ownerDocument,e),t}function G(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===g){var o=t.firstChild;if(null==o)return t;var i=t.lastChild}else o=i=t;var a=r?r.previousSibling:e.lastChild;o.previousSibling=a,i.nextSibling=r,a?a.nextSibling=o:e.firstChild=o,null==r?e.lastChild=i:r.previousSibling=i;do{o.parentNode=e}while(o!==i&&(o=o.nextSibling));return _(e.ownerDocument||e,e),t.nodeType==g&&(t.firstChild=t.lastChild=null),t}function U(){this._nsMap={}}function B(){}function z(){}function V(){}function $(){}function q(){}function H(){}function J(){}function X(){}function Y(){}function W(){}function K(){}function Q(){}function Z(e,t){var r=[],n=9==this.nodeType?this.documentElement:this,o=n.prefix,i=n.namespaceURI;if(i&&null==o&&null==(o=n.lookupPrefix(i)))var a=[{namespace:i,prefix:null}];return te(this,r,e,t,a),r.join("")}function ee(e,t,r){var n=e.prefix||"",o=e.namespaceURI;if(!n&&!o)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===o||"http://www.w3.org/2000/xmlns/"==o)return!1;for(var i=r.length;i--;){var a=r[i];if(a.prefix==n)return a.namespace!=o}return!0}function te(e,t,r,n,i){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case a:i||(i=[]);i.length;var f=e.attributes,y=f.length,v=e.firstChild,w=e.tagName;r=o===e.namespaceURI||r,t.push("<",w);for(var b=0;b<y;b++){"xmlns"==(S=f.item(b)).prefix?i.push({prefix:S.localName,namespace:S.value}):"xmlns"==S.nodeName&&i.push({prefix:"",namespace:S.value})}for(b=0;b<y;b++){var S;if(ee(S=f.item(b),0,i)){var N=S.prefix||"",x=S.namespaceURI,E=N?" xmlns:"+N:" xmlns";t.push(E,'="',x,'"'),i.push({prefix:N,namespace:x})}te(S,t,r,n,i)}if(ee(e,0,i)){N=e.prefix||"",x=e.namespaceURI,E=N?" xmlns:"+N:" xmlns";t.push(E,'="',x,'"'),i.push({prefix:N,namespace:x})}if(v||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(w)){if(t.push(">"),r&&/^script$/i.test(w))for(;v;)v.data?t.push(v.data):te(v,t,r,n,i),v=v.nextSibling;else for(;v;)te(v,t,r,n,i),v=v.nextSibling;t.push("</",w,">")}else t.push("/>");return;case d:case g:for(v=e.firstChild;v;)te(v,t,r,n,i),v=v.nextSibling;return;case s:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,I),'"');case u:return t.push(e.data.replace(/[<&]/g,I));case c:return t.push("<![CDATA[",e.data,"]]>");case h:return t.push("\x3c!--",e.data,"--\x3e");case m:var T=e.publicId,P=e.systemId;if(t.push("<!DOCTYPE ",e.name),T)t.push(' PUBLIC "',T),P&&"."!=P&&t.push('" "',P),t.push('">');else if(P&&"."!=P)t.push(' SYSTEM "',P,'">');else{var M=e.internalSubset;M&&t.push(" [",M,"]"),t.push(">")}return;case p:return t.push("<?",e.target," ",e.data,"?>");case l:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function re(e,t,r){e[t]=r}x.prototype=Error.prototype,r(v,x),E.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)te(this[n],r,e,t);return r.join("")}},T.prototype.item=function(e){return P(this),this[e]},n(T,E),M.prototype={length:0,item:E.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new x(N);var r=this.getNamedItem(e.nodeName);return k(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new x(N);return t=this.getNamedItemNS(e.namespaceURI,e.localName),k(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return D(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return D(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},L.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new F;if(n.implementation=this,n.childNodes=new E,n.doctype=r,r&&n.appendChild(r),t){var o=n.createElementNS(e,t);n.appendChild(o)}return n},createDocumentType:function(e,t,r){var n=new H;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},A.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return G(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return j(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return function e(t,r,n){var o=new r.constructor;for(var i in r){var u=r[i];"object"!=typeof u&&u!=o[i]&&(o[i]=u)}r.childNodes&&(o.childNodes=new E);o.ownerDocument=t;switch(o.nodeType){case a:var c=r.attributes,l=o.attributes=new M,f=c.length;l._ownerElement=o;for(var p=0;p<f;p++)o.setAttributeNode(e(t,c.item(p),!0));break;case s:n=!0}if(n)for(var h=r.firstChild;h;)o.appendChild(e(t,h,n)),h=h.nextSibling;return o}(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==u&&e.nodeType==u?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var n in r)if(r[n]==e)return n;t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==s?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},r(i,A),r(i,A.prototype),F.prototype={nodeName:"#document",nodeType:d,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==g){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&e.nodeType==a&&(this.documentElement=e),G(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),j(this,e)},importNode:function(e,t){return function e(t,r,n){var o;switch(r.nodeType){case a:(o=r.cloneNode(!1)).ownerDocument=t;case g:break;case s:n=!0}o||(o=r.cloneNode(!1));o.ownerDocument=t;o.parentNode=null;if(n)for(var i=r.firstChild;i;)o.appendChild(e(t,i,n)),i=i.nextSibling;return o}(this,e,t)},getElementById:function(e){var t=null;return R(this.documentElement,function(r){if(r.nodeType==a&&r.getAttribute("id")==e)return t=r,!0}),t},createElement:function(e){var t=new U;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new E,(t.attributes=new M)._ownerElement=t,t},createDocumentFragment:function(){var e=new W;return e.ownerDocument=this,e.childNodes=new E,e},createTextNode:function(e){var t=new V;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new $;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new q;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new K;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new B;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new Y;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new U,n=t.split(":"),o=r.attributes=new M;return r.childNodes=new E,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,o._ownerElement=r,r},createAttributeNS:function(e,t){var r=new B,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},n(F,A),U.prototype={nodeType:a,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===g?this.insertBefore(e,null):function(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t),n=e.lastChild}return n=e.lastChild,t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,_(e.ownerDocument,e,t),t}(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new T(this,function(t){var r=[];return R(t,function(n){n===t||n.nodeType!=a||"*"!==e&&n.tagName!=e||r.push(n)}),r})},getElementsByTagNameNS:function(e,t){return new T(this,function(r){var n=[];return R(r,function(o){o===r||o.nodeType!==a||"*"!==e&&o.namespaceURI!==e||"*"!==t&&o.localName!=t||n.push(o)}),n})}},F.prototype.getElementsByTagName=U.prototype.getElementsByTagName,F.prototype.getElementsByTagNameNS=U.prototype.getElementsByTagNameNS,n(U,A),B.prototype.nodeType=s,n(B,A),z.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(w[b])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},n(z,A),V.prototype={nodeName:"#text",nodeType:u,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},n(V,z),$.prototype={nodeName:"#comment",nodeType:h},n($,z),q.prototype={nodeName:"#cdata-section",nodeType:c},n(q,z),H.prototype.nodeType=m,n(H,A),J.prototype.nodeType=y,n(J,A),X.prototype.nodeType=f,n(X,A),Y.prototype.nodeType=l,n(Y,A),W.prototype.nodeName="#document-fragment",W.prototype.nodeType=g,n(W,A),K.prototype.nodeType=p,n(K,A),Q.prototype.serializeToString=function(e,t,r){return Z.call(e,t,r)},A.prototype.toString=Z;try{if(Object.defineProperty){Object.defineProperty(T.prototype,"length",{get:function(){return P(this),this.$$length}}),Object.defineProperty(A.prototype,"textContent",{get:function(){return function e(t){switch(t.nodeType){case a:case g:var r=[];for(t=t.firstChild;t;)7!==t.nodeType&&8!==t.nodeType&&r.push(e(t)),t=t.nextSibling;return r.join("");default:return t.nodeValue}}(this)},set:function(e){switch(this.nodeType){case a:case g:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),re=function(e,t,r){e["$$"+t]=r}}}catch(e){}t.DOMImplementation=L,t.XMLSerializer=Q},function(e,t,r){!function(t,n){if("object"==typeof e.exports&&(e.exports=n(r(19))),"object"==typeof t.navigator){if(!t.Terraformer)throw new Error("Terraformer.ArcGIS requires the core Terraformer library. https://github.com/esri/Terraformer");t.Terraformer.ArcGIS=n(t.Terraformer)}}(this,function(e){var t={};function r(e){var t,r,n,o,i=0,a=0,s=[];n=e.match(/((\+|\-)[^\+\-]+)/g),o=parseInt(n[0],32);for(var u=1;u<n.length;u+=2)i=t=parseInt(n[u],32)+i,a=r=parseInt(n[u+1],32)+a,s.push([t/o,r/o]);return s}function n(e){return function(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}(e[0],e[e.length-1])||e.push(e[0]),e}function o(e){var t={};for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function i(e){for(var t,r=0,n=0,o=e.length,i=e[n];n<o-1;n++)r+=((t=e[n+1])[0]-i[0])*(t[1]+i[1]),i=t;return r>=0}function a(e){var t=[],r=e.slice(0),o=n(r.shift().slice(0));if(o.length>=4){i(o)||o.reverse(),t.push(o);for(var a=0;a<r.length;a++){var s=n(r[a].slice(0));s.length>=4&&(i(s)&&s.reverse(),t.push(s))}}return t}function s(t,r){var n=e.Tools.arraysIntersectArrays(t,r),o=e.Tools.coordinatesContainPoint(t,r[0]);return!(n||!o)}function u(t,a){var c={};return(a=a||{}).idAttribute=a.idAttribute||void 0,!t.spatialReference||3857!==t.spatialReference.wkid&&102100!==t.spatialReference.wkid||(c.crs=e.MercatorCRS),"number"==typeof t.x&&"number"==typeof t.y&&(c.type="Point",c.coordinates=[t.x,t.y],(t.z||t.m)&&c.coordinates.push(t.z),t.m&&c.coordinates.push(t.m)),t.points&&(c.type="MultiPoint",c.coordinates=t.points.slice(0)),t.paths&&(1===t.paths.length?(c.type="LineString",c.coordinates=t.paths[0].slice(0)):(c.type="MultiLineString",c.coordinates=t.paths.slice(0))),t.rings&&(c=function(t){for(var r,o,a,u=[],c=[],l=0;l<t.length;l++){var f=n(t[l].slice(0));if(!(f.length<4))if(i(f)){var p=[f.slice().reverse()];u.push(p)}else c.push(f.slice().reverse())}for(var h=[];c.length;){a=c.pop();var d=!1;for(r=u.length-1;r>=0;r--)if(s(o=u[r][0],a)){u[r].push(a),d=!0;break}d||h.push(a)}for(;h.length;){a=h.pop();var m=!1;for(r=u.length-1;r>=0;r--)if(o=u[r][0],e.Tools.arraysIntersectArrays(o,a)){u[r].push(a),m=!0;break}m||u.push([a.reverse()])}return 1===u.length?{type:"Polygon",coordinates:u[0]}:{type:"MultiPolygon",coordinates:u}}(t.rings.slice(0))),"number"==typeof t.xmin&&"number"==typeof t.ymin&&"number"==typeof t.xmax&&"number"==typeof t.ymax&&(c.type="Polygon",c.coordinates=[[[t.xmax,t.ymax],[t.xmin,t.ymax],[t.xmin,t.ymin],[t.xmax,t.ymin],[t.xmax,t.ymax]]]),(t.compressedGeometry||t.geometry||t.attributes)&&(c.type="Feature",t.compressedGeometry&&(t.geometry={paths:[r(t.compressedGeometry)]}),c.geometry=t.geometry?u(t.geometry):null,c.properties=t.attributes?o(t.attributes):null,t.attributes&&(c.id=t.attributes[a.idAttribute]||t.attributes.OBJECTID||t.attributes.FID)),new e.Primitive(c)}function c(e,t){var r,n=(t=t||{}).idAttribute||"OBJECTID";r=t.sr?{wkid:t.sr}:e&&e.crs&&"urn:ogc:def:crs:OGC:1.3:CRS84"!=e.crs.properties.name?null:{wkid:4326};var i,s={};switch(e.type){case"Point":s.x=e.coordinates[0],s.y=e.coordinates[1],e.coordinates[2]&&(s.z=e.coordinates[2]),e.coordinates[3]&&(s.m=e.coordinates[3]),s.spatialReference=r;break;case"MultiPoint":s.points=e.coordinates.slice(0),s.spatialReference=r;break;case"LineString":s.paths=[e.coordinates.slice(0)],s.spatialReference=r;break;case"MultiLineString":s.paths=e.coordinates.slice(0),s.spatialReference=r;break;case"Polygon":s.rings=a(e.coordinates.slice(0)),s.spatialReference=r;break;case"MultiPolygon":s.rings=function(e){for(var t=[],r=0;r<e.length;r++)for(var n=a(e[r]),o=n.length-1;o>=0;o--){var i=n[o].slice(0);t.push(i)}return t}(e.coordinates.slice(0)),s.spatialReference=r;break;case"Feature":e.geometry&&(s.geometry=c(e.geometry,t)),s.attributes=e.properties?o(e.properties):{},e.id&&(s.attributes[n]=e.id);break;case"FeatureCollection":for(s=[],i=0;i<e.features.length;i++)s.push(c(e.features[i],t));break;case"GeometryCollection":for(s=[],i=0;i<e.geometries.length;i++)s.push(c(e.geometries[i],t))}return s}return t.parse=u,t.convert=c,t.toGeoJSON=u,t.fromGeoJSON=c,t.parseCompressedGeometry=function(t){return new e.LineString(r(t))},t})},function(e,t,r){var n=r(1).DEFAULT_SYMBOLS;function o(e,t){return"#"===e[0]&&(e=e.substr(1)),3===e.length&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),e.length,[parseInt(e.substr(0,2),16),parseInt(e.substr(2,2),16),parseInt(e.substr(4,2),16),void 0===t?255:Math.round(255*t)]}function i(e){return{type:"esriSLS",style:"esriSLSSolid",color:e.stroke?o(e.stroke,e["stroke-opacity"]):n.polyline.color,width:e["stroke-width"]||n.polyline.width}}t.symbol=function(e){var t,r="GeometryCollection"===e.geometry.type?e.geometry.geometries[0].type:e.geometry.type;return"LineString"===r?i(e.properties):"Polygon"===r?{type:"esriSFS",style:"esriSFSSolid",color:(t=e.properties).fill?o(t.fill,t["fill-opacity"]):n.polygon.color,outline:i(t)}:"Point"===r?(e.properties,n.marker):void 0}},function(e,t,r){var n=r(20);e.exports={toFeature:n.toFeature,toFeatureCollection:n.toFeatureCollection}},function(e,t,r){var n=r(3).point,o=r(21).toWgs84;function i(e){var t=n(e);return o(t).geometry.coordinates}e.exports={isPoint:function(e){return"Point"===e.type||"MultiPoint"===e.type},isPolygon:function(e){return"Polygon"===e.type||"MultiPolygon"===e.type},isLine:function(e){return"LineString"===e.type||"MultiLineString"===e.type},valid:function(e){return e&&e.type&&(e.coordinates||"GeometryCollection"===e.type&&e.geometries&&e.geometries.every(geometry.valid))},toWgs84Geometry:function(e){if(e.spatialReference&&4326===e.spatialReference.wkid)return e;if(e.rings)e.rings=e.rings.map(function(e){return e.map(function(e){return i(e)})});else if(e.paths)e.paths=e.paths.map(function(e){return e.map(function(e){return i(e)})});else if(e.points)e.points=e.points.map(function(e){return i(e)});else{var t=i([e.x,e.y]);e.x=t[0],e.y=t[1]}return e.spatialReference={wkid:4326},e}}},function(e,t,r){var n=r(0),o=r(13).parse,i=r(14).parse,a=r(16).parse,s=r(17),u=r(7),c=r(25);function l(e,t){t=Object.assign({style:!0},t);for(var r=[],a=n.get(e,"Placemark"),s=t&&t.style?o(e,{returnPropertiesSetter:!0}):null,u=0;u<a.length;u++)r.push(i(a[u],s));return{type:"FeatureCollection",features:r}}t.parse=function(e,t){var r=a(e);return{geoJSON:l(e,t),folders:r}},t.parseFolder=a,t.parseGeoJSON=l,t.arcgisConvertor=s,t.geoJSONConvertor=u,t.kmlify=c},function(e,t){var r,n,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===i||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:i}catch(e){r=i}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var u,c=[],l=!1,f=-1;function p(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&h())}function h(){if(!l){var e=s(p);l=!0;for(var t=c.length;t;){for(u=c,c=[];++f<t;)u&&u[f].run();f=-1,t=c.length}u=null,l=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new d(e,t)),1!==c.length||l||s(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){function n(e){this.options=e||{locator:{}}}function o(){this.cdata=!1}function i(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function a(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function s(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function u(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}n.prototype.parseFromString=function(e,t){var r=this.options,n=new c,i=r.domBuilder||new o,s=r.errorHandler,u=r.locator,l=r.xmlns||{},f={lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return u&&i.setDocumentLocator(u),n.errorHandler=function(e,t,r){if(!e){if(t instanceof o)return t;e=t}var n={},i=e instanceof Function;function s(t){var o=e[t];!o&&i&&(o=2==e.length?function(r){e(t,r)}:e),n[t]=o&&function(e){o("[xmldom "+t+"]\t"+e+a(r))}||function(){}}return r=r||{},s("warning"),s("error"),s("fatalError"),n}(s,i,u),n.domBuilder=r.domBuilder||i,/\/x?html?$/.test(t)&&(f.nbsp=" ",f.copy="©",l[""]="http://www.w3.org/1999/xhtml"),l.xml=l.xml||"http://www.w3.org/XML/1998/namespace",e?n.parse(e,l,f):n.errorHandler.error("invalid doc source"),i.doc},o.prototype={startDocument:function(){this.doc=(new l).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var o=this.doc,a=o.createElementNS(e,r||t),s=n.length;u(this,a),this.currentElement=a,this.locator&&i(this.locator,a);for(var c=0;c<s;c++){e=n.getURI(c);var l=n.getValue(c),f=(r=n.getQName(c),o.createAttributeNS(e,r));this.locator&&i(n.getLocator(c),f),f.value=f.nodeValue=l,a.setAttributeNode(f)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&i(this.locator,r),u(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=s.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&i(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=s.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&i(this.locator,n),u(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var o=n.createDocumentType(e,t,r);this.locator&&i(this.locator,o),u(this,o)}},warning:function(e){console.warn("[xmldom warning]\t"+e,a(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,a(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,a(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){o.prototype[e]=function(){return null}});var c=r(12).XMLReader,l=t.DOMImplementation=r(4).DOMImplementation;t.XMLSerializer=r(4).XMLSerializer,t.DOMParser=n},function(e,t){var r=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,n=new RegExp("[\\-\\.0-9"+r.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),o=new RegExp("^"+r.source+n.source+"*(?::"+r.source+n.source+"*)?$"),i=0,a=1,s=2,u=3,c=4,l=5,f=6,p=7;function h(){}function d(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function m(e,t,r,n,o,h){for(var d,m=++t,g=i;;){var y=e.charAt(m);switch(y){case"=":if(g===a)d=e.slice(t,m),g=u;else{if(g!==s)throw new Error("attribute equal must after attrName");g=u}break;case"'":case'"':if(g===u||g===a){if(g===a&&(h.warning('attribute value must after "="'),d=e.slice(t,m)),t=m+1,!((m=e.indexOf(y,t))>0))throw new Error("attribute value no end '"+y+"' match");v=e.slice(t,m).replace(/&#?\w+;/g,o),r.add(d,v,t-1),g=l}else{if(g!=c)throw new Error('attribute value must after "="');v=e.slice(t,m).replace(/&#?\w+;/g,o),r.add(d,v,t),h.warning('attribute "'+d+'" missed start quot('+y+")!!"),t=m+1,g=l}break;case"/":switch(g){case i:r.setTagName(e.slice(t,m));case l:case f:case p:g=p,r.closed=!0;case c:case a:case s:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return h.error("unexpected end of input"),g==i&&r.setTagName(e.slice(t,m)),m;case">":switch(g){case i:r.setTagName(e.slice(t,m));case l:case f:case p:break;case c:case a:"/"===(v=e.slice(t,m)).slice(-1)&&(r.closed=!0,v=v.slice(0,-1));case s:g===s&&(v=d),g==c?(h.warning('attribute "'+v+'" missed quot(")!!'),r.add(d,v.replace(/&#?\w+;/g,o),t)):("http://www.w3.org/1999/xhtml"===n[""]&&v.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+v+'" missed value!! "'+v+'" instead!!'),r.add(v,v,t));break;case u:throw new Error("attribute value missed!!")}return m;case"":y=" ";default:if(y<=" ")switch(g){case i:r.setTagName(e.slice(t,m)),g=f;break;case a:d=e.slice(t,m),g=s;break;case c:var v=e.slice(t,m).replace(/&#?\w+;/g,o);h.warning('attribute "'+v+'" missed quot(")!!'),r.add(d,v,t);case l:g=f}else switch(g){case s:r.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&d.match(/^(?:disabled|checked|selected)$/i)||h.warning('attribute "'+d+'" missed value!! "'+d+'" instead2!!'),r.add(d,d,t),t=m,g=a;break;case l:h.warning('attribute space is required"'+d+'"!!');case f:g=a,t=m;break;case u:g=c,t=m;break;case p:throw new Error("elements closed character '/' and '>' must be connected to")}}m++}}function g(e,t,r){for(var n=e.tagName,o=null,i=e.length;i--;){var a=e[i],s=a.qName,u=a.value;if((p=s.indexOf(":"))>0)var c=a.prefix=s.slice(0,p),l=s.slice(p+1),f="xmlns"===c&&l;else l=s,c=null,f="xmlns"===s&&"";a.localName=l,!1!==f&&(null==o&&(o={},w(r,r={})),r[f]=o[f]=u,a.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(f,u))}for(i=e.length;i--;){(c=(a=e[i]).prefix)&&("xml"===c&&(a.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==c&&(a.uri=r[c||""]))}var p;(p=n.indexOf(":"))>0?(c=e.prefix=n.slice(0,p),l=e.localName=n.slice(p+1)):(c=null,l=e.localName=n);var h=e.uri=r[c||""];if(t.startElement(h,l,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=o,!0;if(t.endElement(h,l,n),o)for(c in o)t.endPrefixMapping(c)}function y(e,t,r,n,o){if(/^(?:script|textarea)$/i.test(r)){var i=e.indexOf("</"+r+">",t),a=e.substring(t+1,i);if(/[&<]/.test(a))return/^script$/i.test(r)?(o.characters(a,0,a.length),i):(a=a.replace(/&#?\w+;/g,n),o.characters(a,0,a.length),i)}return t+1}function v(e,t,r,n){var o=n[r];return null==o&&((o=e.lastIndexOf("</"+r+">"))<t&&(o=e.lastIndexOf("</"+r)),n[r]=o),o<t}function w(e,t){for(var r in e)t[r]=e[r]}function b(e,t,r,n){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(o=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,o-t-4),o+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var o=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,o-t-9),r.endCDATA(),o+3}var i=function(e,t){var r,n=[],o=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;o.lastIndex=t,o.exec(e);for(;r=o.exec(e);)if(n.push(r),r[1])return n}(e,t),a=i.length;if(a>1&&/!doctype/i.test(i[0][0])){var s=i[1][0],u=a>3&&/^public$/i.test(i[2][0])&&i[3][0],c=a>4&&i[4][0],l=i[a-1];return r.startDTD(s,u&&u.replace(/^(['"])(.*?)\1$/,"$2"),c&&c.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),l.index+l[0].length}}return-1}function S(e,t,r){var n=e.indexOf("?>",t);if(n){var o=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(o){o[0].length;return r.processingInstruction(o[1],o[2]),n+2}return-1}return-1}function N(e){}function x(e,t){return e.__proto__=t,e}h.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),w(t,t={}),function(e,t,r,n,o){function i(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(o.error("entity not found:"+e),e)}function a(t){if(t>w){var r=e.substring(w,t).replace(/&#?\w+;/g,i);f&&s(w),n.characters(r,0,t-w),w=t}}function s(t,r){for(;t>=c&&(r=l.exec(e));)u=r.index,c=u+r[0].length,f.lineNumber++;f.columnNumber=t-u+1}var u=0,c=0,l=/.*(?:\r\n?|\n)|.*$/g,f=n.locator,p=[{currentNSMap:t}],h={},w=0;for(;;){try{var x=e.indexOf("<",w);if(x<0){if(!e.substr(w).match(/^\s*$/)){var E=n.doc,T=E.createTextNode(e.substr(w));E.appendChild(T),n.currentElement=T}return}switch(x>w&&a(x),e.charAt(x+1)){case"/":var P=e.indexOf(">",x+3),M=e.substring(x+2,P),C=p.pop();P<0?(M=e.substring(x+2).replace(/[\s<].*/,""),o.error("end tag name: "+M+" is not complete:"+C.tagName),P=x+1+M.length):M.match(/\s</)&&(M=M.replace(/[\s<].*/,""),o.error("end tag name: "+M+" maybe not complete"),P=x+1+M.length);var k=C.localNSMap,D=C.tagName==M,L=D||C.tagName&&C.tagName.toLowerCase()==M.toLowerCase();if(L){if(n.endElement(C.uri,C.localName,M),k)for(var A in k)n.endPrefixMapping(A);D||o.fatalError("end tag name: "+M+" is not match the current start tagName:"+C.tagName)}else p.push(C);P++;break;case"?":f&&s(x),P=S(e,x,n);break;case"!":f&&s(x),P=b(e,x,n,o);break;default:f&&s(x);var I=new N,R=p[p.length-1].currentNSMap,P=m(e,x,I,R,i,o),F=I.length;if(!I.closed&&v(e,P,I.tagName,h)&&(I.closed=!0,r.nbsp||o.warning("unclosed xml attribute")),f&&F){for(var O=d(f,{}),_=0;_<F;_++){var j=I[_];s(j.offset),j.locator=d(f,{})}n.locator=O,g(I,n,R)&&p.push(I),n.locator=f}else g(I,n,R)&&p.push(I);"http://www.w3.org/1999/xhtml"!==I.uri||I.closed?P++:P=y(e,P,I.tagName,i,n)}}catch(e){o.error("element parse error: "+e),P=-1}P>w?w=P:a(Math.max(x,w)+1)}}(e,t,r,n,this.errorHandler),n.endDocument()}},N.prototype={setTagName:function(e){if(!o.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!o.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}},x({},x.prototype)instanceof x||(x=function(e,t){function r(){}for(t in r.prototype=t,r=new r,e)r[t]=e[t];return r}),t.XMLReader=h},function(e,t,r){var n=r(2),o=r(0),i=o.get,a=o.get1,s=o.attr,u=o.nodeVal,c=o.xml2str,l=n.kmlColor;function f(e){if(!e||!e.length)return 0;for(var t=0,r=0;t<e.length;t++)r=(r<<5)-r+e.charCodeAt(t)|0;return r}t.parse=function(e,t){for(var r={},n={},o={},p=i(e,"Style"),h=i(e,"StyleMap"),d=0;d<p.length;d++){var m=f(c(p[d])).toString(16);r["#"+s(p[d],"id")]=m,n[m]=p[d]}for(var g=0;g<h.length;g++){r["#"+s(h[g],"id")]=f(c(h[g])).toString(16);for(var y=i(h[g],"Pair"),v={},w=0;w<y.length;w++)v[u(a(y[w],"key"))]=u(a(y[w],"styleUrl"));o["#"+s(h[g],"id")]=v}return t&&t.returnPropertiesSetter?function(e,t){!function(e,t,r,n,o){var i=u(a(e,"styleUrl")),s=a(e,"LineStyle"),c=a(e,"PolyStyle"),f=null;if(i){"#"!==i[0]&&(i="#"+i),t.styleUrl=i,n[i]&&(t.styleHash=n[i]),o[i]&&(t.styleMapHash=o[i],t.styleHash=n[o[i].normal]);var p=r[t.styleHash];p&&(f=a(p,"IconStyle"),s=s||a(p,"LineStyle"),c=c||a(p,"PolyStyle"))}f&&function(e,t){var r=a(t,"Icon");if(r){var n=u(a(r,"href"));n&&(e.icon=n)}}(t,f);s&&function(e,t){var r=l(u(a(t,"color"))),n=r[0],o=r[1],i=parseFloat(u(a(t,"width")));n&&(e.stroke=n);isNaN(o)||(e["stroke-opacity"]=o);isNaN(i)||(e["stroke-width"]=i)}(t,s);c&&function(e,t){var r=l(u(a(t,"color"))),n=r[0],o=r[1],i=u(a(t,"fill")),s=u(a(t,"outline"));n&&(e.fill=n);isNaN(o)||(e["fill-opacity"]=o);i&&(e["fill-opacity"]="1"===i?e["fill-opacity"]||1:0);s&&(e["stroke-opacity"]="1"===s?e["stroke-opacity"]||1:0)}(t,c)}(e,t,n,r,o)}:{styleByHash:n,styleIndex:r,styleMapIndex:o}}},function(e,t,r){var n=r(1).FOLDER_KEY_NAME,o=r(15).parse,i=r(0),a=i.get,s=i.parent,u=i.get1,c=i.nodeVal,l=i.attr;t.parse=function(e,t){var r,i={},f=o(e),p="Folder"===s(e).tagName?l(s(e),n):null,h=c(u(e,"name")),d=c(u(e,"address")),m=c(u(e,"description")),g=u(e,"TimeSpan"),y=u(e,"TimeStamp"),v=u(e,"ExtendedData"),w=u(e,"visibility");if(!f.geoms.length)return[];if(v){var b=a(v,"Data"),S=a(v,"SimpleData");for(r=0;r<b.length;r++)i[b[r].getAttribute("name")]=c(u(b[r],"value"));for(r=0;r<S.length;r++)i[S[r].getAttribute("name")]=c(S[r])}if(p&&(i.folder=p),h&&(i.name=h),d&&(i.address=d),m&&(i.description=m),w&&(i.visibility=c(w)),y&&(i.timestamp=c(u(y,"when"))),g){var N=c(u(g,"begin")),x=c(u(g,"end"));i.timespan={begin:N,end:x}}f.coordTimes.length&&(i.coordTimes=1===f.coordTimes.length?f.coordTimes[0]:f.coordTimes),t&&t(e,i);var E={type:"Feature",geometry:1===f.geoms.length?f.geoms[0]:{type:"GeometryCollection",geometries:f.geoms},properties:i};return l(e,"id")&&(E.id=l(e,"id")),E}},function(e,t,r){var n=r(0),o=n.get,i=n.get1,a=n.nodeVal,s=["Polygon","LineString","Point","Track","gx:Track"];function u(e){for(var t=0,r=[];t<e.length;t++)r[t]=parseFloat(e[t]);return r}var c=/\s*/g;function l(e){return u(e.replace(c,"").split(","))}var f=/^\s*|\s*$/g,p=/\s+/;function h(e){for(var t=e.replace(f,"").split(p),r=[],n=0;n<t.length;n++)r.push(l(t[n]));return r}function d(e){var t=o(e,"coord","gx"),r=[],n=[];0===t.length&&(t=o(e,"gx:coord"));for(var i=0;i<t.length;i++)r.push(u(a(t[i]).split(" ")));for(var s=o(e,"when"),c=0;c<s.length;c++)n.push(a(s[c]));return{coords:r,times:n}}t.parse=function e(t){var r,n,u,c,f,p=[],m=[];if(i(t,"MultiGeometry"))return e(i(t,"MultiGeometry"));if(i(t,"MultiTrack"))return e(i(t,"MultiTrack"));if(i(t,"gx:MultiTrack"))return e(i(t,"gx:MultiTrack"));for(u=0;u<s.length;u++)if(n=o(t,s[u]))for(c=0;c<n.length;c++)if(r=n[c],"Point"===s[u])p.push({type:"Point",coordinates:l(a(i(r,"coordinates")))});else if("LineString"===s[u])p.push({type:"LineString",coordinates:h(a(i(r,"coordinates")))});else if("Polygon"===s[u]){var g=o(r,"LinearRing"),y=[];for(f=0;f<g.length;f++)y.push(h(a(i(g[f],"coordinates"))));p.push({type:"Polygon",coordinates:y})}else if("Track"===s[u]||"gx:Track"===s[u]){var v=d(r);p.push({type:"LineString",coordinates:v.coords}),v.times.length&&m.push(v.times)}return{geoms:p,coordTimes:m}}},function(e,t,r){var n=r(1).FOLDER_KEY_NAME,o=r(0),i=o.parent,a=o.nodeVal,s=o.get,u=o.get1,c=o.attr,l=o.setAttr;t.parse=function(e,t){var r=Array.from(s(e,"Folder"));if(0===r.length)return[];var o=t&&t.defaultFolderName?t.defaultFolderName:"unknown",f=i(r[0]),p=0,h=function(e){var t=i(e),s=u(e,"name"),f=p+++"";return l(e,n,f),{key:f,parent:"Folder"===t.tagName?c(t,n):null,name:s?a(s):o,children:r.filter(function(t){return i(t)===e}).map(h)}};return r.filter(function(e){return i(e)===f}).map(h)}},function(e,t,r){var n=r(18).graphicJSON,o=r(6).symbol;e.exports={graphicJSON:n,symbol:o}},function(e,t,r){var n=r(5).convert,o=r(6).symbol;t.graphicJSON=function(e){var t;if("GeometryCollection"===e.geometry.type){var r=n(e.geometry),i=e.geometry.geometries[0]&&e.geometry.geometries[0].type;t={spatialReference:{wkid:4326}},"Point"===i?t.points=r.map(function(e){return[e.x,e.y,e.z||0]}):"LineString"===i?(t.paths=[],r.forEach(function(e){e.paths.forEach(function(e){t.paths.push(e)})})):"Polygon"===i&&(t.rings=[],r.forEach(function(e){e.rings.forEach(function(e){t.rings.push(e)})}))}else(t=n(e.geometry)).spatialReference={wkid:4326};return{attributes:e.properties,geometry:t,symbol:o(e)}}},function(e,t,r){var n,o;n=this,o=function(){var e={},t=6378137,r=57.29577951308232,n=.017453292519943,o={type:"link",properties:{href:"http://spatialreference.org/ref/sr-org/6928/ogcwkt/",type:"ogcwkt"}};function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function a(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e}function s(e){if(e.type)switch(e.type){case"Point":return[e.coordinates[0],e.coordinates[1],e.coordinates[0],e.coordinates[1]];case"MultiPoint":case"LineString":return c(e.coordinates);case"MultiLineString":case"Polygon":return u(e.coordinates);case"MultiPolygon":return function(e){for(var t=null,r=null,n=null,o=null,i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.length;s++)for(var u=a[s],c=0;c<u.length;c++){var l=u[c],f=l[0],p=l[1];null===t?t=f:f<t&&(t=f),null===r?r=f:f>r&&(r=f),null===n?n=p:p<n&&(n=p),null===o?o=p:p>o&&(o=p)}return[t,n,r,o]}(e.coordinates);case"Feature":return e.geometry?s(e.geometry):null;case"FeatureCollection":return function(e){for(var t,r=[],n=e.features.length-1;n>=0;n--)t=s(e.features[n].geometry),r.push([t[0],t[1]]),r.push([t[2],t[3]]);return c(r)}(e);case"GeometryCollection":return function(e){for(var t,r=[],n=e.geometries.length-1;n>=0;n--)t=s(e.geometries[n]),r.push([t[0],t[1]]),r.push([t[2],t[3]]);return c(r)}(e);default:throw new Error("Unknown type: "+e.type)}return null}function u(e){for(var t=null,r=null,n=null,o=null,i=0;i<e.length;i++)for(var a=e[i],s=0;s<a.length;s++){var u=a[s],c=u[0],l=u[1];null===t?t=c:c<t&&(t=c),null===r?r=c:c>r&&(r=c),null===n?n=l:l<n&&(n=l),null===o?o=l:l>o&&(o=l)}return[t,n,r,o]}function c(e){for(var t=null,r=null,n=null,o=null,i=0;i<e.length;i++){var a=e[i],s=a[0],u=a[1];null===t?t=s:s<t&&(t=s),null===r?r=s:s>r&&(r=s),null===n?n=u:u<n&&(n=u),null===o?o=u:u>o&&(o=u)}return[t,n,r,o]}function l(e){var t=s(e);return{x:t[0],y:t[1],w:Math.abs(t[0]-t[2]),h:Math.abs(t[1]-t[3])}}function f(e){return e*r}function p(e){return e*n}function h(e){var r=e[0],n=e[1];return[f(r/t)-360*Math.floor((f(r/t)+180)/360),f(Math.PI/2-2*Math.atan(Math.exp(-1*n/t)))]}function d(e){var r=e[0],n=Math.max(Math.min(e[1],89.99999),-89.99999);return[p(r)*t,t/2*Math.log((1+Math.sin(p(n)))/(1-Math.sin(p(n))))]}function m(e,t,r){if("Point"===e.type)e.coordinates=t(e.coordinates);else if("Feature"===e.type)e.geometry=m(e.geometry,t,!0);else if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)e.features[n]=m(e.features[n],t,!0);else if("GeometryCollection"===e.type)for(var i=0;i<e.geometries.length;i++)e.geometries[i]=m(e.geometries[i],t,!0);else e.coordinates=function e(t,r){for(var n=0;n<t.length;n++)"number"==typeof t[n][0]&&(t[n]=r(t[n])),"object"==typeof t[n]&&(t[n]=e(t[n],r));return t}(e.coordinates,t);return r||t===d&&(e.crs=o),t===h&&delete e.crs,e}function g(e){return m(e,d)}function y(e){return m(e,h)}function v(e,t){return e[0]>t[0]?-1:e[0]<t[0]?1:e[1]>t[1]?-1:e[1]<t[1]?1:0}function w(e,t,r){return(n=(t[0]-e[0])*(r[1]-e[1])-(r[0]-e[0])*(t[1]-e[1]))<(o=0)?-1:n>o?1:0;var n,o}function b(e,t){var r=t[0]-e[0],n=t[1]-e[1];return r*r+n*n}function S(e,t){var r=t;for(var n in e){var o=w(t,r,e[n]);(-1===o||0===o&&b(t,e[n])>b(t,r))&&(r=e[n])}return r}function N(e){if(0===e.length)return[];if(1===e.length)return e;for(var t=[e.sort(v)[0]],r=0;r<t.length;r++){var n=S(e,t[r]);n!==t[0]&&t.push(n)}return t}function x(e,t){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n][1]<=t[1]&&t[1]<e[i][1]||e[i][1]<=t[1]&&t[1]<e[n][1])&&t[0]<(e[i][0]-e[n][0])*(t[1]-e[n][1])/(e[i][1]-e[n][1])+e[n][0]&&(r=!r);return r}function E(e,t){if(e&&e.length){if(1===e.length)return x(e[0],t);if(x(e[0],t)){for(var r=1;r<e.length;r++)if(x(e[r],t))return!1;return!0}return!1}return!1}function T(e,t,r,n){var o=(n[0]-r[0])*(e[1]-r[1])-(n[1]-r[1])*(e[0]-r[0]),i=(t[0]-e[0])*(e[1]-r[1])-(t[1]-e[1])*(e[0]-r[0]),a=(n[1]-r[1])*(t[0]-e[0])-(n[0]-r[0])*(t[1]-e[1]);if(0!==a){var s=o/a,u=i/a;if(0<=s&&s<=1&&0<=u&&u<=1)return!0}return!1}function P(e){return!isNaN(parseFloat(e))&&isFinite(e)}function M(e,t){if(P(e[0][0])){if(P(t[0][0])){for(var r=0;r<e.length-1;r++)for(var n=0;n<t.length-1;n++)if(T(e[r],e[r+1],t[n],t[n+1]))return!0}else for(var o=0;o<t.length;o++)if(M(e,t[o]))return!0}else for(var i=0;i<e.length;i++)if(M(e[i],t))return!0;return!1}function C(e){for(var t=[],r=0;r<e.length;r++){var n=e[r].slice();!1===k(n[0],n[n.length-1])&&n.push(n[0]),t.push(n)}return t}function k(e,t){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function D(e,t){if(e.length!==t.length)return!1;for(var r=e.slice().sort(v),n=t.slice().sort(v),o=0;o<r.length;o++){if(r[o].length!==n[o].length)return!1;for(var i=0;i<r.length;i++)if(r[o][i]!==n[o][i])return!1}return!0}var L=["length"];function A(e){if(e)switch(e.type){case"Point":return new I(e);case"MultiPoint":return new R(e);case"LineString":return new F(e);case"MultiLineString":return new O(e);case"Polygon":return new _(e);case"MultiPolygon":return new G(e);case"Feature":return new U(e);case"FeatureCollection":return new B(e);case"GeometryCollection":return new z(e);default:throw new Error("Unknown type: "+e.type)}}function I(e){var t=Array.prototype.slice.call(arguments);if(e&&"Point"===e.type&&e.coordinates)a(this,e);else if(e&&i(e))this.coordinates=e;else{if(!(t.length>=2))throw"Terraformer: invalid input for Terraformer.Point";this.coordinates=t}this.type="Point"}function R(e){if(e&&"MultiPoint"===e.type&&e.coordinates)a(this,e);else{if(!i(e))throw"Terraformer: invalid input for Terraformer.MultiPoint";this.coordinates=e}this.type="MultiPoint"}function F(e){if(e&&"LineString"===e.type&&e.coordinates)a(this,e);else{if(!i(e))throw"Terraformer: invalid input for Terraformer.LineString";this.coordinates=e}this.type="LineString"}function O(e){if(e&&"MultiLineString"===e.type&&e.coordinates)a(this,e);else{if(!i(e))throw"Terraformer: invalid input for Terraformer.MultiLineString";this.coordinates=e}this.type="MultiLineString"}function _(e){if(e&&"Polygon"===e.type&&e.coordinates)a(this,e);else{if(!i(e))throw"Terraformer: invalid input for Terraformer.Polygon";this.coordinates=e}this.type="Polygon"}function G(e){if(e&&"MultiPolygon"===e.type&&e.coordinates)a(this,e);else{if(!i(e))throw"Terraformer: invalid input for Terraformer.MultiPolygon";this.coordinates=e}this.type="MultiPolygon"}function U(e){if(e&&"Feature"===e.type)a(this,e);else{if(!(e&&e.type&&e.coordinates))throw"Terraformer: invalid input for Terraformer.Feature";this.geometry=e}this.type="Feature"}function B(e){if(e&&"FeatureCollection"===e.type&&e.features)a(this,e);else{if(!i(e))throw"Terraformer: invalid input for Terraformer.FeatureCollection";this.features=e}this.type="FeatureCollection"}function z(e){if(e&&"GeometryCollection"===e.type&&e.geometries)a(this,e);else if(i(e))this.geometries=e;else{if(!e.coordinates||!e.type)throw"Terraformer: invalid input for Terraformer.GeometryCollection";this.type="GeometryCollection",this.geometries=[e]}this.type="GeometryCollection"}function V(e,t,r){for(var n=d(e),o=r||64,i={type:"Polygon",coordinates:[[]]},a=1;a<=o;a++){var s=a*(360/o)*Math.PI/180;i.coordinates[0].push([n[0]+t*Math.cos(s),n[1]+t*Math.sin(s)])}return i.coordinates=C(i.coordinates),y(i)}function $(e,t,r){var n=r||64,o=t||250;if(!e||e.length<2||!o||!n)throw new Error("Terraformer: missing parameter for Terraformer.Circle");a(this,new U({type:"Feature",geometry:V(e,o,n),properties:{radius:o,center:e,steps:n}}))}return A.prototype.toMercator=function(){return g(this)},A.prototype.toGeographic=function(){return y(this)},A.prototype.envelope=function(){return l(this)},A.prototype.bbox=function(){return s(this)},A.prototype.convexHull=function(){var e,t,r=[];if("Point"===this.type)return null;if("LineString"===this.type||"MultiPoint"===this.type){if(!(this.coordinates&&this.coordinates.length>=3))return null;r=this.coordinates}else if("Polygon"===this.type||"MultiLineString"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(e=0;e<this.coordinates.length;e++)r=r.concat(this.coordinates[e]);if(r.length<3)return null}else if("MultiPolygon"===this.type){if(!(this.coordinates&&this.coordinates.length>0))return null;for(e=0;e<this.coordinates.length;e++)for(t=0;t<this.coordinates[e].length;t++)r=r.concat(this.coordinates[e][t]);if(r.length<3)return null}else if("Feature"===this.type){return new A(this.geometry).convexHull()}return new _({type:"Polygon",coordinates:C([N(r)])})},A.prototype.toJSON=function(){var e={};for(var t in this)this.hasOwnProperty(t)&&-1===L.indexOf(t)&&(e[t]=this[t]);return e.bbox=s(this),e},A.prototype.contains=function(e){return new A(e).within(this)},A.prototype.within=function(e){var t,r;if("Feature"===e.type&&(e=e.geometry),"Point"===e.type&&"Point"===this.type)return k(this.coordinates,e.coordinates);if("MultiLineString"===e.type&&"Point"===this.type)for(t=0;t<e.coordinates.length;t++){var n={type:"LineString",coordinates:e.coordinates[t]};if(this.within(n))return!0}if(("LineString"===e.type||"MultiPoint"===e.type)&&"Point"===this.type)for(t=0;t<e.coordinates.length;t++){if(this.coordinates.length!==e.coordinates[t].length)return!1;if(k(this.coordinates,e.coordinates[t]))return!0}if("Polygon"===e.type){if("Polygon"===this.type){if(e.coordinates.length===this.coordinates.length)for(t=0;t<this.coordinates.length;t++)if(D(this.coordinates[t],e.coordinates[t]))return!0;return!(!this.coordinates.length||!E(e.coordinates,this.coordinates[0][0]))&&!M(C(this.coordinates),C(e.coordinates))}if("Point"===this.type)return E(e.coordinates,this.coordinates);if("LineString"===this.type||"MultiPoint"===this.type){if(!this.coordinates||0===this.coordinates.length)return!1;for(t=0;t<this.coordinates.length;t++)if(!1===E(e.coordinates,this.coordinates[t]))return!1;return!0}if("MultiLineString"===this.type){for(t=0;t<this.coordinates.length;t++){if(!1===new F(this.coordinates[t]).within(e))return r++,!1}return!0}if("MultiPolygon"===this.type){for(t=0;t<this.coordinates.length;t++){if(!1===new A({type:"Polygon",coordinates:this.coordinates[t]}).within(e))return!1}return!0}}if("MultiPolygon"===e.type){if("Point"===this.type){if(e.coordinates.length)for(t=0;t<e.coordinates.length;t++)if(E(e.coordinates[t],this.coordinates)&&!1===M([this.coordinates],e.coordinates))return!0;return!1}if("Polygon"===this.type){for(t=0;t<this.coordinates.length;t++)if(e.coordinates[t].length===this.coordinates.length)for(j=0;j<this.coordinates.length;j++)if(D(this.coordinates[j],e.coordinates[t][j]))return!0;if(!1===M(this.coordinates,e.coordinates)&&e.coordinates.length){for(t=0;t<e.coordinates.length;t++)r=!1!==E(e.coordinates[t],this.coordinates[0][0]);return r}}else if("LineString"===this.type||"MultiPoint"===this.type)for(t=0;t<e.coordinates.length;t++){var o={type:"Polygon",coordinates:e.coordinates[t]};return!!this.within(o)}else{if("MultiLineString"===this.type){for(t=0;t<this.coordinates.length;t++){if(!1===new F(this.coordinates[t]).within(e))return!1}return!0}if("MultiPolygon"===this.type){for(t=0;t<e.coordinates.length;t++){var i={type:"Polygon",coordinates:e.coordinates[t]};if(!1===this.within(i))return!1}return!0}}}return!1},A.prototype.intersects=function(e){"Feature"===e.type&&(e=e.geometry);var t=new A(e);return!(!this.within(e)&&!t.within(this))||("Point"!==this.type&&"MultiPoint"!==this.type&&"Point"!==e.type&&"MultiPoint"!==e.type?M(this.coordinates,e.coordinates):"Feature"===this.type?new A(this.geometry).intersects(e):(function(){var e=Array.prototype.slice.apply(arguments);void 0!==typeof console&&console.warn&&console.warn.apply(console,e)}("Type "+this.type+" to "+e.type+" intersection is not supported by intersects"),!1))},I.prototype=new A,I.prototype.constructor=I,R.prototype=new A,R.prototype.constructor=R,R.prototype.forEach=function(e){for(var t=0;t<this.coordinates.length;t++)e.apply(this,[this.coordinates[t],t,this.coordinates]);return this},R.prototype.addPoint=function(e){return this.coordinates.push(e),this},R.prototype.insertPoint=function(e,t){return this.coordinates.splice(t,0,e),this},R.prototype.removePoint=function(e){return"number"==typeof e?this.coordinates.splice(e,1):this.coordinates.splice(this.coordinates.indexOf(e),1),this},R.prototype.get=function(e){return new I(this.coordinates[e])},F.prototype=new A,F.prototype.constructor=F,F.prototype.addVertex=function(e){return this.coordinates.push(e),this},F.prototype.insertVertex=function(e,t){return this.coordinates.splice(t,0,e),this},F.prototype.removeVertex=function(e){return this.coordinates.splice(e,1),this},O.prototype=new A,O.prototype.constructor=O,O.prototype.forEach=function(e){for(var t=0;t<this.coordinates.length;t++)e.apply(this,[this.coordinates[t],t,this.coordinates])},O.prototype.get=function(e){return new F(this.coordinates[e])},_.prototype=new A,_.prototype.constructor=_,_.prototype.addVertex=function(e){return this.insertVertex(e,this.coordinates[0].length-1),this},_.prototype.insertVertex=function(e,t){return this.coordinates[0].splice(t,0,e),this},_.prototype.removeVertex=function(e){return this.coordinates[0].splice(e,1),this},_.prototype.close=function(){this.coordinates=C(this.coordinates)},_.prototype.hasHoles=function(){return this.coordinates.length>1},_.prototype.holes=function(){if(holes=[],this.hasHoles())for(var e=1;e<this.coordinates.length;e++)holes.push(new _([this.coordinates[e]]));return holes},G.prototype=new A,G.prototype.constructor=G,G.prototype.forEach=function(e){for(var t=0;t<this.coordinates.length;t++)e.apply(this,[this.coordinates[t],t,this.coordinates])},G.prototype.get=function(e){return new _(this.coordinates[e])},G.prototype.close=function(){var e=[];return this.forEach(function(t){e.push(C(t))}),this.coordinates=e,this},U.prototype=new A,U.prototype.constructor=U,B.prototype=new A,B.prototype.constructor=B,B.prototype.forEach=function(e){for(var t=0;t<this.features.length;t++)e.apply(this,[this.features[t],t,this.features])},B.prototype.get=function(e){var t;return this.forEach(function(r){r.id===e&&(t=r)}),new U(t)},z.prototype=new A,z.prototype.constructor=z,z.prototype.forEach=function(e){for(var t=0;t<this.geometries.length;t++)e.apply(this,[this.geometries[t],t,this.geometries])},z.prototype.get=function(e){return new A(this.geometries[e])},$.prototype=new A,$.prototype.constructor=$,$.prototype.recalculate=function(){return this.geometry=V(this.properties.center,this.properties.radius,this.properties.steps),this},$.prototype.center=function(e){return e&&(this.properties.center=e,this.recalculate()),this.properties.center},$.prototype.radius=function(e){return e&&(this.properties.radius=e,this.recalculate()),this.properties.radius},$.prototype.steps=function(e){return e&&(this.properties.steps=e,this.recalculate()),this.properties.steps},$.prototype.toJSON=function(){return A.prototype.toJSON.call(this)},e.Primitive=A,e.Point=I,e.MultiPoint=R,e.LineString=F,e.MultiLineString=O,e.Polygon=_,e.MultiPolygon=G,e.Feature=U,e.FeatureCollection=B,e.GeometryCollection=z,e.Circle=$,e.toMercator=g,e.toGeographic=y,e.Tools={},e.Tools.positionToMercator=d,e.Tools.positionToGeographic=h,e.Tools.applyConverter=m,e.Tools.toMercator=g,e.Tools.toGeographic=y,e.Tools.createCircle=V,e.Tools.calculateBounds=s,e.Tools.calculateEnvelope=l,e.Tools.coordinatesContainPoint=x,e.Tools.polygonContainsPoint=E,e.Tools.arraysIntersectArrays=M,e.Tools.coordinatesContainPoint=x,e.Tools.coordinatesEqual=D,e.Tools.convexHull=N,e.Tools.isConvex=function(e){for(var t,r=0;r<e.length-3;r++){var n=e[r],o=e[r+1],i=e[r+2],a=[o[0]-n[0],o[1]-n[1]],s=i[0]*a[1]-i[1]*a[0]+a[0]*n[1]-a[1]*n[0];if(0===r)t=s<0;else if(t&&s>0||!t&&s<0)return!1}return!0},e.MercatorCRS=o,e.GeographicCRS={type:"link",properties:{href:"http://spatialreference.org/ref/epsg/4326/ogcwkt/",type:"ogcwkt"}},e},"object"==typeof e.exports&&(e.exports=o()),"object"==typeof window&&(n.Terraformer=o())},function(e,t,r){var n=r(5).parse,o=r(8),i=r(24).styleProperties;t.toFeature=function(e){return{type:"Feature",geometry:n(o.toWgs84Geometry(e.geometry)),properties:Object.assign({},e.attributes,i(e))}},t.toFeatureCollection=function(e){return{type:"FeatureCollection",features:(e||[]).map(t.toFeature)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),o=r(3),i=r(23);function a(e,t,r){void 0===r&&(r={});var a=(r=r||{}).mutate;if(!e)throw new Error("geojson is required");return Array.isArray(e)&&o.isNumber(e[0])?e="mercator"===t?s(e):u(e):(!0!==a&&(e=i.default(e)),n.coordEach(e,function(e){var r="mercator"===t?s(e):u(e);e[0]=r[0],e[1]=r[1]})),e}function s(e){var t,r=Math.PI/180,n=6378137,o=20037508.342789244,i=[n*(Math.abs(e[0])<=180?e[0]:e[0]-360*((t=e[0])<0?-1:t>0?1:0))*r,n*Math.log(Math.tan(.25*Math.PI+.5*e[1]*r))];return i[0]>o&&(i[0]=o),i[0]<-o&&(i[0]=-o),i[1]>o&&(i[1]=o),i[1]<-o&&(i[1]=-o),i}function u(e){var t=180/Math.PI,r=6378137;return[e[0]*t/r,(.5*Math.PI-2*Math.atan(Math.exp(-e[1]/r)))*t]}t.toMercator=function(e,t){return void 0===t&&(t={}),a(e,"mercator",t)},t.toWgs84=function(e,t){return void 0===t&&(t={}),a(e,"wgs84",t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3);function o(e,t,r){if(null!==e)for(var n,i,a,s,u,c,l,f,p=0,h=0,d=e.type,m="FeatureCollection"===d,g="Feature"===d,y=m?e.features.length:1,v=0;v<y;v++){u=(f=!!(l=m?e.features[v].geometry:g?e.geometry:e)&&"GeometryCollection"===l.type)?l.geometries.length:1;for(var w=0;w<u;w++){var b=0,S=0;if(null!==(s=f?l.geometries[w]:l)){c=s.coordinates;var N=s.type;switch(p=!r||"Polygon"!==N&&"MultiPolygon"!==N?0:1,N){case null:break;case"Point":if(!1===t(c,h,v,b,S))return!1;h++,b++;break;case"LineString":case"MultiPoint":for(n=0;n<c.length;n++){if(!1===t(c[n],h,v,b,S))return!1;h++,"MultiPoint"===N&&b++}"LineString"===N&&b++;break;case"Polygon":case"MultiLineString":for(n=0;n<c.length;n++){for(i=0;i<c[n].length-p;i++){if(!1===t(c[n][i],h,v,b,S))return!1;h++}"MultiLineString"===N&&b++,"Polygon"===N&&S++}"Polygon"===N&&b++;break;case"MultiPolygon":for(n=0;n<c.length;n++){for(S=0,i=0;i<c[n].length;i++){for(a=0;a<c[n][i].length-p;a++){if(!1===t(c[n][i][a],h,v,b,S))return!1;h++}S++}b++}break;case"GeometryCollection":for(n=0;n<s.geometries.length;n++)if(!1===o(s.geometries[n],t,r))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function i(e,t){var r;switch(e.type){case"FeatureCollection":for(r=0;r<e.features.length&&!1!==t(e.features[r].properties,r);r++);break;case"Feature":t(e.properties,0)}}function a(e,t){if("Feature"===e.type)t(e,0);else if("FeatureCollection"===e.type)for(var r=0;r<e.features.length&&!1!==t(e.features[r],r);r++);}function s(e,t){var r,n,o,i,a,s,u,c,l,f,p=0,h="FeatureCollection"===e.type,d="Feature"===e.type,m=h?e.features.length:1;for(r=0;r<m;r++){for(s=h?e.features[r].geometry:d?e.geometry:e,c=h?e.features[r].properties:d?e.properties:{},l=h?e.features[r].bbox:d?e.bbox:void 0,f=h?e.features[r].id:d?e.id:void 0,a=(u=!!s&&"GeometryCollection"===s.type)?s.geometries.length:1,o=0;o<a;o++)if(null!==(i=u?s.geometries[o]:s))switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===t(i,p,c,l,f))return!1;break;case"GeometryCollection":for(n=0;n<i.geometries.length;n++)if(!1===t(i.geometries[n],p,c,l,f))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===t(null,p,c,l,f))return!1;p++}}function u(e,t){s(e,function(e,r,o,i,a){var s,u=null===e?null:e.type;switch(u){case null:case"Point":case"LineString":case"Polygon":return!1!==t(n.feature(e,o,{bbox:i,id:a}),r,0)&&void 0}switch(u){case"MultiPoint":s="Point";break;case"MultiLineString":s="LineString";break;case"MultiPolygon":s="Polygon"}for(var c=0;c<e.coordinates.length;c++){var l={type:s,coordinates:e.coordinates[c]};if(!1===t(n.feature(l,o),r,c))return!1}})}function c(e,t){u(e,function(e,r,i){var a=0;if(e.geometry){var s=e.geometry.type;if("Point"!==s&&"MultiPoint"!==s){var u,c=0,l=0,f=0;return!1!==o(e,function(o,s,p,h,d){if(void 0===u||r>c||h>l||d>f)return u=o,c=r,l=h,f=d,void(a=0);var m=n.lineString([u,o],e.properties);if(!1===t(m,r,i,d,a))return!1;a++,u=o})&&void 0}}})}function l(e,t){if(!e)throw new Error("geojson is required");u(e,function(e,r,o){if(null!==e.geometry){var i=e.geometry.type,a=e.geometry.coordinates;switch(i){case"LineString":if(!1===t(e,r,o,0,0))return!1;break;case"Polygon":for(var s=0;s<a.length;s++)if(!1===t(n.lineString(a[s],e.properties),r,o,s))return!1}}})}t.coordEach=o,t.coordReduce=function(e,t,r,n){var i=r;return o(e,function(e,n,o,a,s){i=0===n&&void 0===r?e:t(i,e,n,o,a,s)},n),i},t.propEach=i,t.propReduce=function(e,t,r){var n=r;return i(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.featureEach=a,t.featureReduce=function(e,t,r){var n=r;return a(e,function(e,o){n=0===o&&void 0===r?e:t(n,e,o)}),n},t.coordAll=function(e){var t=[];return o(e,function(e){t.push(e)}),t},t.geomEach=s,t.geomReduce=function(e,t,r){var n=r;return s(e,function(e,o,i,a,s){n=0===o&&void 0===r?e:t(n,e,o,i,a,s)}),n},t.flattenEach=u,t.flattenReduce=function(e,t,r){var n=r;return u(e,function(e,o,i){n=0===o&&0===i&&void 0===r?e:t(n,e,o,i)}),n},t.segmentEach=c,t.segmentReduce=function(e,t,r){var n=r,o=!1;return c(e,function(e,i,a,s,u){n=!1===o&&void 0===r?e:t(n,e,i,a,s,u),o=!0}),n},t.lineEach=l,t.lineReduce=function(e,t,r){var n=r;return l(e,function(e,o,i,a){n=0===o&&void 0===r?e:t(n,e,o,i,a)}),n},t.findSegment=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.segmentIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),u=u||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":u=u||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var c=r.coordinates;switch(r.type){case"Point":case"MultiPoint":return null;case"LineString":return s<0&&(s=c.length+s-1),n.lineString([c[s],c[s+1]],u,t);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s-1),n.lineString([c[a][s],c[a][s+1]],u,t);case"MultiLineString":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s-1),n.lineString([c[i][s],c[i][s+1]],u,t);case"MultiPolygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),s<0&&(s=c[i][a].length-s-1),n.lineString([c[i][a][s],c[i][a][s+1]],u,t)}throw new Error("geojson is invalid")},t.findPoint=function(e,t){if(t=t||{},!n.isObject(t))throw new Error("options is invalid");var r,o=t.featureIndex||0,i=t.multiFeatureIndex||0,a=t.geometryIndex||0,s=t.coordIndex||0,u=t.properties;switch(e.type){case"FeatureCollection":o<0&&(o=e.features.length+o),u=u||e.features[o].properties,r=e.features[o].geometry;break;case"Feature":u=u||e.properties,r=e.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":r=e;break;default:throw new Error("geojson is invalid")}if(null===r)return null;var c=r.coordinates;switch(r.type){case"Point":return n.point(c,u,t);case"MultiPoint":return i<0&&(i=c.length+i),n.point(c[i],u,t);case"LineString":return s<0&&(s=c.length+s),n.point(c[s],u,t);case"Polygon":return a<0&&(a=c.length+a),s<0&&(s=c[a].length+s),n.point(c[a][s],u,t);case"MultiLineString":return i<0&&(i=c.length+i),s<0&&(s=c[i].length+s),n.point(c[i][s],u,t);case"MultiPolygon":return i<0&&(i=c.length+i),a<0&&(a=c[i].length+a),s<0&&(s=c[i][a].length-s),n.point(c[i][a][s],u,t)}throw new Error("geojson is invalid")}},function(e,t,r){"use strict";function n(e){var t={type:"Feature"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"properties":case"geometry":return;default:t[r]=e[r]}}),t.properties=function e(t){var r={};if(!t)return r;Object.keys(t).forEach(function(n){var o=t[n];"object"==typeof o?null===o?r[n]=null:Array.isArray(o)?r[n]=o.map(function(e){return e}):r[n]=e(o):r[n]=o});return r}(e.properties),t.geometry=o(e.geometry),t}function o(e){var t={type:e.type};return e.bbox&&(t.bbox=e.bbox),"GeometryCollection"===e.type?(t.geometries=e.geometries.map(function(e){return o(e)}),t):(t.coordinates=function e(t){var r=t;if("object"!=typeof r[0])return r.slice();return r.map(function(t){return e(t)})}(e.coordinates),t)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e)throw new Error("geojson is required");switch(e.type){case"Feature":return n(e);case"FeatureCollection":return function(e){var t={type:"FeatureCollection"};return Object.keys(e).forEach(function(r){switch(r){case"type":case"features":return;default:t[r]=e[r]}}),t.features=e.features.map(function(e){return n(e)}),t}(e);case"Point":case"LineString":case"Polygon":case"MultiPoint":case"MultiLineString":case"MultiPolygon":case"GeometryCollection":return o(e);default:throw new Error("unknown GeoJSON type")}}},function(e,t,r){var n=r(2).numberToHex;function o(e){return{hex:n(e[0])+n(e[1])+n(e[2]),opacity:(e.length>3?e[3]:255)/255}}t.styleProperties=function(e){var t=e.geometry,r=e.symbol||{},n={};if(t.rings){var i=o(r.color),a=o(r.outline.color);n.fill=i.hex,n["fill-opacity"]=i.opacity,n.stroke=a.hex,n["stroke-opacity"]=a.opacity,n["stroke-width"]=r.outline.width}else if(t.paths){var s=o(r.color);n.stroke=s.hex,n["stroke-opacity"]=s.opacity,n["stroke-width"]=r.width}return n}},function(e,t,r){var n=r(26),o=r(2),i=r(7).toFeatureCollection,a=r(8),s=r(28),u=r(1),c=n.tag;function l(e,t){return function(r){if(!r.properties||!a.valid(r.geometry))return"";var n=d(r.geometry);if(!n)return"";var i="",l="";if(e.simpleStyle){var f=s.hashStyle(r.properties);f&&(a.isPoint(r.geometry)&&s.hasMarkerStyle(r.properties)?(-1===t.indexOf(f)&&(i=function(e,t){return c("Style",{id:t},c("IconStyle",c("Icon",c("href",s.iconUrl(e))))+c("hotSpot",{xunits:"fraction",yunits:"fraction",x:.5,y:.5},""))}(r.properties,f),t.push(f)),l=c("styleUrl","#"+f)):(a.isPolygon(r.geometry)||a.isLine(r.geometry))&&s.hasPolygonAndLineStyle(r.properties)&&(-1===t.indexOf(f)&&(i=function(e,t){var r=c("LineStyle",[c("color",o.hexToKmlColor(e.stroke,e["stroke-opacity"])||u.lineStyleColor)+c("width",(void 0===e["stroke-width"]?u.lineWidth:e["stroke-width"])+"")]),n="";(e.fill||e["fill-opacity"])&&(n=c("PolyStyle",[c("color",o.hexToKmlColor(e.fill,e["fill-opacity"])||u.polySyleColor)]));return c("Style",{id:t},r+n)}(r.properties,f),t.push(f)),l=c("styleUrl","#"+f)))}return i+c("Placemark",function(e,t){return e[t.name]?c("name",e[t.name]):""}(r.properties,e)+function(e,t){return e[t.description]?c("description",e[t.description]):""}(r.properties,e)+function(e){return c("ExtendedData",function(e){var t=[];for(var r in e)t.push([r,e[r]]);return t}(e).map(p).join(""))}(r.properties)+function(e,t){return e[t.timestamp]?c("TimeStamp",c("when",e[t.timestamp])):""}(r.properties,e)+n+l)}}function f(e){return e.map(function(e){return e.join(",")}).join(" ")}function p(e){return c("Data",{name:e[0]},c("value",e[1]||""))}e.exports=function(e,t,r){return t=t||[],e="geojson"===(r=Object.assign({documentName:void 0,documentDescription:void 0,name:"name",description:"description",simpleStyle:!0,timestamp:"timestamp",folder:"folder",dataType:"geojson"},r)).dataType?e:i(e),'<?xml version="1.0" encoding="UTF-8"?>'+c("kml",{xmlns:"http://www.opengis.net/kml/2.2"},c("Document",function(e){return void 0!==e.documentName?c("name",e.documentName):""}(r)+function(e){return void 0!==e.documentDescription?c("description",e.documentDescription):""}(r)+function(e,t,r){if(!e.type)return"";var n=[];switch(e.type){case"FeatureCollection":return e.features?t.length>0&&r.folder?function(e,t,r,n){return function e(o){o=o||[];if(0===o.length)return"";return o.map(function(o){var i=t.filter(function(e){return e.properties[n.folder]===o.key});return c("Folder",c("name",o.name)+e(o.children)+i.map(l(n,r)).join(""))}).join("")}(e)}(t,e.features,n,r):e.features.map(l(r,n)).join(""):"";case"Feature":return l(r,n)(e);default:return l(r,n)({type:"Feature",geometry:e,properties:{}})}}(e,t,r)))};var h={Point:function(e){return c("Point",c("coordinates",e.coordinates.join(",")))},LineString:function(e){return c("LineString",c("coordinates",f(e.coordinates)))},Polygon:function(e){if(!e.coordinates.length)return"";var t=e.coordinates[0],r=e.coordinates.slice(1),n=c("outerBoundaryIs",c("LinearRing",c("coordinates",f(t)))),o=r.map(function(e){return c("innerBoundaryIs",c("LinearRing",c("coordinates",f(e))))}).join("");return c("Polygon",n+o)},MultiPoint:function(e){return e.coordinates.length?c("MultiGeometry",e.coordinates.map(function(e){return h.Point({coordinates:e})}).join("")):""},MultiPolygon:function(e){return e.coordinates.length?c("MultiGeometry",e.coordinates.map(function(e){return h.Polygon({coordinates:e})}).join("")):""},MultiLineString:function(e){return e.coordinates.length?c("MultiGeometry",e.coordinates.map(function(e){return h.LineString({coordinates:e})}).join("")):""},GeometryCollection:function(e){return c("MultiGeometry",e.geometries.map(d).join(""))}};function d(e){return h[e.type]?h[e.type](e):""}},function(e,t,r){var n=r(27);function o(e){return Object.keys(e).length?" "+Object.keys(e).map(function(t){return t+'="'+n(e[t])+'"'}).join(" "):""}e.exports.attr=o,e.exports.tagClose=function(e,t){return"<"+e+o(t)+"/>"},e.exports.tag=function(e,t,r){(Array.isArray(t)||"string"==typeof t)&&(r=t,t={});Array.isArray(r)&&(r="\n"+r.map(function(e){return"  "+e}).join("\n")+"\n");return"<"+e+o(t)+">"+r+"</"+e+">"}},function(e,t){(e.exports=function e(t,r){var n;if(null!=t)return r=(r||"").replace(/[^&"<>\']/g,""),n="([&\"<>'])".replace(new RegExp("["+r+"]","g"),""),t.replace(new RegExp(n,"g"),function(t,r){return e.map[r]})}).map={">":"&gt;","<":"&lt;","'":"&apos;",'"':"&quot;","&":"&amp;"}},function(e,t){e.exports={hasPolygonAndLineStyle:function(e){var t={stroke:!0,"stroke-opacity":!0,"stroke-width":!0,fill:!0,"fill-opacity":!0};for(var r in e)if(t[r])return!0},hashStyle:function(e){var t="";return e["marker-symbol"]&&(t=t+"ms"+e["marker-symbol"]),e["marker-color"]&&(t=t+"mc"+e["marker-color"].replace("#","")),e["marker-size"]&&(t=t+"ms"+e["marker-size"]),e.stroke&&(t=t+"s"+e.stroke.replace("#","")),e["stroke-width"]&&(t=t+"sw"+e["stroke-width"].toString().replace(".","")),e["stroke-opacity"]&&(t=t+"mo"+e["stroke-opacity"].toString().replace(".","")),e.fill&&(t=t+"f"+e.fill.replace("#","")),e["fill-opacity"]&&(t=t+"fo"+e["fill-opacity"].toString().replace(".","")),t},hasMarkerStyle:function(e){return!!(e["marker-size"]||e["marker-symbol"]||e["marker-color"])},iconUrl:function(e){var t=e["marker-size"]||"medium",r=e["marker-symbol"]?"-"+e["marker-symbol"]:"",n=(e["marker-color"]||"7e7e7e").replace("#","");return"https://api.tiles.mapbox.com/v3/marker/pin-"+t.charAt(0)+r+"+"+n+".png"}}}]);